<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Zpfs_hdfs</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../..//javascripts/menu.js"></script>
<script type="text/javascript" src="../..//javascripts/sidebar.js"></script>
<script type="text/javascript" src="../..//javascripts/steps.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/source-utils.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/highlight-lines.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/collapse-lines.js"></script>
<script type="text/javascript" src="../..//javascripts/tabcontainer.js"></script>
<script type="text/javascript" src="//unpkg.com/clipboard@2.0.0/dist/clipboard.min.js"></script>
<script type="text/javascript" src="../..//javascripts/clipboard.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.js"></script>
<script type="text/javascript" src="../..//javascripts/search.js"></script>
<!-- <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/united/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css"
  /> -->
<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,800" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../..//styles/zetapush-styles.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/custom-styles.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/tabcontainer.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/steps.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/sourcecode/collapse-lines.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/sourcecode/highlight-lines.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/clipboard.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.css">
<script type="text/html" id="hit-template">
  <div class="hit">
    <div class="hit-content">
      <div class="context">
        <a href="{{sourceFile.url}}">{{sourceFile.title}}</a>
        {{#parents}}
          <a href="{{url}}">{{title}}</a>
        {{/parents}}
        <a href="{{url}}">{{{_highlightResult.title.value}}}</a>
      </div>
      <pre class="hit-description">{{{_highlightResult.content.value}}}</pre>
    </div>
  </div>
</script>
<header>
  <nav>
    <div class="main-title"><span></span><i class="fa fa-caret-down"></i></div>
    <ul>
      <li><a href="/documentation"><span>ZetaPush documentation</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/quick-start.html"><span>Quick start</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/developer-manual.html"><span>Developer manual</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/how-to.html"><span>How to guides</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/tutorials.html"><span>Tutorials</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/reference.html"><span>Reference</span><i class="fa fa-angle-right"></i></a></li>
    </ul>
    <div>
      <div class="contact-us">
        <a href="https://spectrum.chat/zetapush" target="_blank">Contact us</a>
      </div>
      <div class="github">
        <a href="https://github.com/zetapush" target="_blank">
          <span>Join us on</span><i class="fa fa-github-alt" title="Github"></i></a>
      </div>
      <div class="search">
        <input id="search-input" placeholder="Search for products">
        <div class="search-results">
            <div id="search-hits"></div>
        </div>
      </div>
      <div class="logo">
        <a href="https://zetapush.com"><span class="icon"></span></a>
      </div>
    </div>
  </nav>
</header>
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_zpfs_hdfs">Zpfs_hdfs</a>
<ul class="sectlevel2">
<li><a href="#_readtoken">readToken</a></li>
<li><a href="#_create">create</a></li>
<li><a href="#_open">open</a></li>
<li><a href="#_link">link</a></li>
<li><a href="#_stat">stat</a></li>
<li><a href="#_cp">cp</a></li>
<li><a href="#_ls">ls</a></li>
<li><a href="#_mv">mv</a></li>
<li><a href="#_snapshot">snapshot</a></li>
<li><a href="#_du">du</a></li>
<li><a href="#_rm">rm</a></li>
<li><a href="#_freeuploadurl">freeUploadUrl</a></li>
<li><a href="#_newuploadurl">newUploadUrl</a></li>
<li><a href="#_updatemeta">updateMeta</a></li>
<li><a href="#_newfile">newFile</a></li>
<li><a href="#_mkdir">mkdir</a></li>
<li><a href="#_how_to_use_it">How to use it ?</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_zpfs_hdfs"><a class="anchor" href="#_zpfs_hdfs"></a>Zpfs_hdfs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>User API for local file management</p>
</div>
<div class="paragraph">
<p>User API for file content manipulation
User API for virtual file management and http file upload
This API contains all the verbs needed to browse, upload and remove files.
Files are stored on a per-user basis: each user has his or her own whole virtual filesystem.
Uploading a file is a 3-step process : request an upload URL, upload via HTTP, notify this service of completion.</p>
</div>
<div class="sect2">
<h3 id="_readtoken"><a class="anchor" href="#_readtoken"></a>readToken</h3>
<div class="paragraph">
<p>Requests a token. This token can be used to retrieve a compressed folder via HTTP.</p>
</div>
<div class="listingblock">
<div class="title">readToken(parameters: <a href="../../common/cloud-services-types/zpfs-request.html">ZpfsRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/zpfs-token.html">ZpfsToken</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.readToken(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_create"><a class="anchor" href="#_create"></a>create</h3>
<div class="paragraph">
<p>Creates a file, writes content and closes the file as a single operation.
Calling this verb is functionnally equivalent to successively calling 'newUploadUrl', posting the content and calling 'newFile'</p>
</div>
<div class="listingblock">
<div class="title">create(parameters: <a href="../../common/cloud-services-types/file-creation-request.html">FileCreationRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/listing-entry-info.html">ListingEntryInfo</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.create(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_open"><a class="anchor" href="#_open"></a>open</h3>
<div class="paragraph">
<p>Opens a file for reading.</p>
</div>
<div class="listingblock">
<div class="title">open(parameters: <a href="../../common/cloud-services-types/zpfs-request.html">ZpfsRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/zpfs-file-handler.html">ZpfsFileHandler</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.open(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_link"><a class="anchor" href="#_link"></a>link</h3>
<div class="paragraph">
<p>Links a file or folder to another location.
May fail if the target location is not empty.</p>
</div>
<div class="listingblock">
<div class="title">link(parameters: <a href="../../common/cloud-services-types/created-file.html">CreatedFile</a>): Promise&lt;<a href="../../common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.link(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stat"><a class="anchor" href="#_stat"></a>stat</h3>
<div class="paragraph">
<p>Returns information about a single file.
The entry field will be null if the path does not exist</p>
</div>
<div class="listingblock">
<div class="title">stat(parameters: <a href="../../common/cloud-services-types/file-stat-request.html">FileStatRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/file-stat-result.html">FileStatResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.stat(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cp"><a class="anchor" href="#_cp"></a>cp</h3>
<div class="paragraph">
<p>Copies a file or folder (recursively) to a new location.
May fail if the target location is not empty.</p>
</div>
<div class="listingblock">
<div class="title">cp(parameters: <a href="../../common/cloud-services-types/created-file.html">CreatedFile</a>): Promise&lt;<a href="../../common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.cp(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ls"><a class="anchor" href="#_ls"></a>ls</h3>
<div class="paragraph">
<p>Returns a paginated list of the folder&#8217;s content.</p>
</div>
<div class="listingblock">
<div class="title">ls(parameters: <a href="../../common/cloud-services-types/folder-listing-request.html">FolderListingRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/folder-listing.html">FolderListing</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.ls(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mv"><a class="anchor" href="#_mv"></a>mv</h3>
<div class="paragraph">
<p>Moves a file or folder (recursively) to a new location.
May fail if the target location is not empty.</p>
</div>
<div class="listingblock">
<div class="title">mv(parameters: <a href="../../common/cloud-services-types/created-file.html">CreatedFile</a>): Promise&lt;<a href="../../common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.mv(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_snapshot"><a class="anchor" href="#_snapshot"></a>snapshot</h3>
<div class="paragraph">
<p>Creates a new folder and then copies the given files inside</p>
</div>
<div class="listingblock">
<div class="title">snapshot(parameters: <a href="../../common/cloud-services-types/snapshot-creation-request.html">SnapshotCreationRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.snapshot(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_du"><a class="anchor" href="#_du"></a>du</h3>
<div class="paragraph">
<p>Returns an recursively aggregated number of used bytes, starting at the given path.</p>
</div>
<div class="listingblock">
<div class="title">du(parameters: <a href="../../common/cloud-services-types/zpfs-request.html">ZpfsRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/zpfs-disk-usage.html">ZpfsDiskUsage</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.du(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rm"><a class="anchor" href="#_rm"></a>rm</h3>
<div class="paragraph">
<p>Removes a file or folder (recursively).</p>
</div>
<div class="listingblock">
<div class="title">rm(parameters: <a href="../../common/cloud-services-types/file-removal.html">FileRemoval</a>): Promise&lt;<a href="../../common/cloud-services-types/file-removal.html">FileRemoval</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.rm(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_freeuploadurl"><a class="anchor" href="#_freeuploadurl"></a>freeUploadUrl</h3>
<div class="listingblock">
<div class="title">freeUploadUrl(parameters: <a href="../../common/cloud-services-types/file-upload-request.html">FileUploadRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/file-upload-location.html">FileUploadLocation</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.freeUploadUrl(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_newuploadurl"><a class="anchor" href="#_newuploadurl"></a>newUploadUrl</h3>
<div class="paragraph">
<p>Requests an HTTP upload URL.
The URL contains temporary credentials (typically valid for a few minutes) and is meant for immediate use.</p>
</div>
<div class="listingblock">
<div class="title">newUploadUrl(parameters: <a href="../../common/cloud-services-types/file-upload-request.html">FileUploadRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/file-upload-location.html">FileUploadLocation</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.newUploadUrl(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_updatemeta"><a class="anchor" href="#_updatemeta"></a>updateMeta</h3>
<div class="listingblock">
<div class="title">updateMeta(parameters: <a href="../../common/cloud-services-types/file-meta-update.html">FileMetaUpdate</a>): Promise&lt;<a href="../../common/cloud-services-types/listing-entry-info.html">ListingEntryInfo</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.updateMeta(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_newfile"><a class="anchor" href="#_newfile"></a>newFile</h3>
<div class="paragraph">
<p>The client application calls this verb to notify that it&#8217;s done uploading to the cloud.
Calling that verb MAY trigger additional events such as thumbnail/metadata creation.</p>
</div>
<div class="listingblock">
<div class="title">newFile(parameters: <a href="../../common/cloud-services-types/file-upload-complete.html">FileUploadComplete</a>): Promise&lt;<a href="../../common/cloud-services-types/listing-entry-info.html">ListingEntryInfo</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.newFile(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mkdir"><a class="anchor" href="#_mkdir"></a>mkdir</h3>
<div class="paragraph">
<p>Creates a new folder.
May fail if the target location is not empty.</p>
</div>
<div class="listingblock">
<div class="title">mkdir(parameters: <a href="../../common/cloud-services-types/folder-creation-request.html">FolderCreationRequest</a>): Promise&lt;<a href="../../common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.mkdir(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_use_it"><a class="anchor" href="#_how_to_use_it"></a>How to use it ?</h3>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
  <td class="code"><pre>import { Injectable, Zpfs_hdfs, ZpfsRequest } from '@zetapush/platform'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private zpfs_hdfs: Zpfs_hdfs <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: ZpfsRequest) {
    const response = await this.zpfs_hdfs.readToken(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Zpfs_hdfs</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-07-24 10:48:38 UTC
</div>
</div>
</body>
</html>