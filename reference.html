<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Reference</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src=".//javascripts/menu.js"></script>
<script type="text/javascript" src=".//javascripts/sidebar.js"></script>
<script type="text/javascript" src=".//javascripts/steps.js"></script>
<script type="text/javascript" src=".//javascripts/sourcecode/source-utils.js"></script>
<script type="text/javascript" src=".//javascripts/sourcecode/highlight-lines.js"></script>
<script type="text/javascript" src=".//javascripts/sourcecode/collapse-lines.js"></script>
<script type="text/javascript" src=".//javascripts/tabcontainer.js"></script>
<script type="text/javascript" src="//unpkg.com/clipboard@2.0.0/dist/clipboard.min.js"></script>
<script type="text/javascript" src=".//javascripts/clipboard.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.js"></script>
<script type="text/javascript" src=".//javascripts/search.js"></script>
<!-- <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/united/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css"
  /> -->
<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,800" rel="stylesheet">
<link rel="stylesheet" type="text/css" href=".//styles/zetapush-styles.css" />
<link rel="stylesheet" type="text/css" href=".//styles/custom-styles.css" />
<link rel="stylesheet" type="text/css" href=".//styles/tabcontainer.css" />
<link rel="stylesheet" type="text/css" href=".//styles/steps.css" />
<link rel="stylesheet" type="text/css" href=".//styles/sourcecode/collapse-lines.css" />
<link rel="stylesheet" type="text/css" href=".//styles/sourcecode/highlight-lines.css" />
<link rel="stylesheet" type="text/css" href=".//styles/clipboard.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.css">
<script type="text/html" id="hit-template">
  <div class="hit">
    <div class="hit-content">
      <div class="context">
        <a href="{{sourceFile.url}}">{{sourceFile.title}}</a>
        {{#parents}}
          <a href="{{url}}">{{title}}</a>
        {{/parents}}
        <a href="{{url}}">{{{_highlightResult.title.value}}}</a>
      </div>
      <pre class="hit-description">{{{_highlightResult.content.value}}}</pre>
    </div>
  </div>
</script>
<header>
  <nav>
    <div class="main-title"><span></span><i class="fa fa-caret-down"></i></div>
    <ul>
      <li><a href="/documentation"><span>ZetaPush documentation</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/getting-started.html"><span>Getting Started</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/developer-manual.html"><span>Developer manual</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/how-to.html"><span>How to guides</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/tutorials.html"><span>Tutorials</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/reference.html"><span>Reference</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="http://docv2.zetapush.com"><span>Documentation v2</span><i class="fa fa-angle-right"></i></a></li>
    </ul>
    <div>
      <div class="contact-us">
        <a href="https://www.zetapush.com/contact" target="_blank">Contact us</a>
      </div>
      <div class="github">
        <a href="https://github.com/zetapush" target="_blank">
          <span>Join us on</span><i class="fa fa-github-alt" title="Github"></i></a>
      </div>
      <div class="search">
        <input id="search-input" placeholder="Search for products">
        <div class="search-results">
          <div id="search-hits"></div>
        </div>
      </div>
      <div class="logo">
        <a href="https://www.zetapush.com"><span class="icon"></span></a>
      </div>
    </div>
  </nav>
</header>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Reference</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_zetapush_management">ZetaPush management</a>
<ul class="sectlevel2">
<li><a href="#_manage_zetapush_account">Manage ZetaPush account</a></li>
<li><a href="#manage_organization">Manage your organization</a></li>
<li><a href="#_manage_applications">Manage applications</a></li>
<li><a href="#manage_environments">Manage environments</a></li>
</ul>
</li>
<li><a href="#_architecture">Architecture</a>
<ul class="sectlevel2">
<li><a href="#_general_architecture">General architecture</a></li>
<li><a href="#_zetapush_choices">ZetaPush choices</a></li>
<li><a href="#_application_code_structure">Application code structure</a></li>
</ul>
</li>
<li><a href="#_zetapush_development_concepts">ZetaPush development concepts</a>
<ul class="sectlevel2">
<li><a href="#_npm_modules_provided_by_zetapush">Npm modules provided by ZetaPush</a></li>
<li><a href="#dependency_injection">Dependency injection</a></li>
<li><a href="#modules">Modules</a></li>
<li><a href="#_current_running_context">Current running context</a></li>
</ul>
</li>
<li><a href="#_develop_with_zetapush">Develop with ZetaPush</a>
<ul class="sectlevel2">
<li><a href="#_develop_your_front_only">Develop your front only</a></li>
<li><a href="#generate_sdks">Generate SDKs from custom cloud service code</a></li>
<li><a href="#_develop_custom_cloud_services">Develop custom cloud services</a></li>
<li><a href="#_advanced_usage_of_cloud_services">Advanced usage of cloud services</a></li>
</ul>
</li>
<li><a href="#_available_cloud_services">Available cloud services</a>
<ul class="sectlevel2">
<li><a href="#_standard_user_workflow">Standard User Workflow</a></li>
<li><a href="#builtin_cloud_services">Technical cloud services</a></li>
</ul>
</li>
<li><a href="#cli">Command Line Interface</a>
<ul class="sectlevel2">
<li><a href="#_config">Config</a></li>
<li><a href="#_run">Run</a></li>
<li><a href="#_push_2">Push</a></li>
<li><a href="#verbosity_level">Change verbosity</a></li>
</ul>
</li>
<li><a href="#_configuration">Configuration</a>
<ul class="sectlevel2">
<li><a href="#_account_configuration">Account configuration</a></li>
<li><a href="#_code_structure_configuration">Code structure configuration</a></li>
<li><a href="#configuration_properties">Configuration properties</a></li>
<li><a href="#_customize_cloud_services">Customize cloud services</a></li>
</ul>
</li>
<li><a href="#_logs_2">Logs</a>
<ul class="sectlevel2">
<li><a href="#_console_log">Console.log</a></li>
<li><a href="#local_logger">Utility methods provided by @zetapush/common</a></li>
<li><a href="#log_service">Built-in log cloud service</a></li>
<li><a href="#_logs_using_requestcontext">Logs using requestContext</a></li>
<li><a href="#_use_another_logging_library">Use another logging library</a></li>
<li><a href="#logs_in_web_console">View logs in web console</a></li>
<li><a href="#_persist_logs">Persist logs</a></li>
<li><a href="#_external_log_visualization">External log visualization</a></li>
</ul>
</li>
<li><a href="#_tests">Tests</a>
<ul class="sectlevel2">
<li><a href="#_test_your_custom_cloud_services">Test your custom cloud services</a></li>
<li><a href="#test_in_typescript">Write tests in TypeScript</a></li>
<li><a href="#advanced_mocks">Mocks</a></li>
<li><a href="#test_snapshot">Initialize test with data</a></li>
<li><a href="#_logs_in_tests">Logs in tests</a></li>
</ul>
</li>
<li><a href="#_advanced_run_of_your_application">Advanced run of your application</a>
<ul class="sectlevel2">
<li><a href="#run_worker_only">Run cloud services only</a></li>
<li><a href="#_run_front_only">Run front only</a></li>
</ul>
</li>
<li><a href="#_advanced_deployment_of_your_application">Advanced deployment of your application</a>
<ul class="sectlevel2">
<li><a href="#partial_deployment">Partial deployment</a></li>
<li><a href="#_environment_variables">Environment variables</a></li>
<li><a href="#_custom_npm_registry">Custom npm registry</a></li>
</ul>
</li>
<li><a href="#http_server">HTTP server</a>
<ul class="sectlevel2">
<li><a href="#internal_http_server">HTTP server provided by ZetaPush</a></li>
<li><a href="#custom_http_server">Custom HTTP server</a></li>
</ul>
</li>
<li><a href="#_extend_a_cloud_service">Extend a cloud service</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_zetapush_management"><a class="anchor" href="#_zetapush_management"></a>ZetaPush management</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_manage_zetapush_account"><a class="anchor" href="#_manage_zetapush_account"></a>Manage ZetaPush account</h3>
<div class="paragraph">
<p>The ZetaPush account gives you access to the ZetaPush cloud.
As a developer, you need an account to be authorized to develop your product.
As a manager, you need an account to <a href="#manage_organization">organize your teams</a>.</p>
</div>
<div class="sect3">
<h4 id="_create_your_account"><a class="anchor" href="#_create_your_account"></a>Create your account</h4>
<div class="paragraph">
<p>Currently, the only way to get a ZetaPush account is by contacting us. The aim is to understand your needs
and to advise you even if you just want to test it:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.zetapush.com/sign-up-for-a-free-trial/">Signup for a free trial</a></p>
</li>
<li>
<p><a href="https://www.zetapush.com/contact">Contact us for more suitable account</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your account will be created soon after the first contact and an application that fits your
needs will be available. Then you are ready to start working with ZetaPush.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Soon we will open access to everyone for free trial. Account creation will be available through
our CLI tool, from the main site and the web console.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_manage_your_profile"><a class="anchor" href="#_manage_your_profile"></a>Manage your profile</h4>
<div class="paragraph">
<p>The management of your ZetaPush account and profile will soon be available on the web console.
Now you can <a href="https://www.zetapush.com/contact">contact us</a> if you want us to manage your informations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_delete_your_account"><a class="anchor" href="#_delete_your_account"></a>Delete your account</h4>
<div class="paragraph">
<p>If you want to delete your ZetaPush account, you can contact us:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.zetapush.com/contact">Contact us for delete your accounts</a></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Permanent deletion</div>
<div class="paragraph">
<p>The removal is irreversible and permanent. All of your applications will be deleted.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="manage_organization"><a class="anchor" href="#manage_organization"></a>Manage your organization</h3>
<div class="paragraph">
<p>An <strong>organization</strong> is a concept to let you work in team.</p>
</div>
<div class="paragraph">
<p>The organization commonly groups all <strong>ZetaPush accounts</strong> of your company.
You can have several applications for your organization and you can manage access rights on applications according to members of your team.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">What is an application</div>
<div class="paragraph">
<p>An application is a logical container designed to perform a group of coordinated tasks or activities for the benefit of the user.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, if you are in the company named "MyCompany" which has two applications named "MyApplication1" and "MyApplication2" :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One organization is created with the name "MyCompany"</p>
</li>
<li>
<p>Two applications are created and named "MyApplication1" and "MyApplication2"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <strong>ZetaPush administrator account</strong> of this organization can access to these two applications. He can also change the access rights  <a href="#access_control_per_application">by application</a>.</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="manage-organization.png" alt="manage organization" width="641" height="377">
</div>
</div>
<div class="paragraph">
<p>In the above example, we have one organization which contains two separate applications.
Each application has 3 users. The users of one application cannot work on the other application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Manage access rights from web console</div>
<div class="paragraph">
<p>The access rights are managed by ZetaPush for now in order to fit your needs. Thereafter, you will be able to manage them via the <a href="https://console-celtia.zetapush.com"><strong>web console</strong></a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_manage_applications"><a class="anchor" href="#_manage_applications"></a>Manage applications</h3>
<div class="paragraph">
<p>An <strong>application</strong> is a logical container designed to perform a group of coordinated tasks or activities for the benefit of the user.</p>
</div>
<div class="sect3">
<h4 id="add_application"><a class="anchor" href="#add_application"></a>Add an application</h4>
<div class="paragraph">
<p>There are several ways to create a new application :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.zetapush.com/sign-up-for-a-free-trial/">Signup for a free trial</a></p>
</li>
<li>
<p><a href="https://www.zetapush.com/contact">Contact us for more suitable application</a></p>
</li>
<li>
<p>Via the <strong>web console</strong> (not available yet)</p>
</li>
<li>
<p>Via the <strong>CLI</strong> (not available yet)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_sign_up_for_a_free_trial"><a class="anchor" href="#_sign_up_for_a_free_trial"></a>Sign up for a free trial</h5>
<div class="paragraph">
<p>When you ask for a free trial, a <strong>ZetaPush account</strong> and an <strong>application</strong> are provided to you.</p>
</div>
<div class="paragraph">
<p>You can ask for a free trial via <a href="https://www.zetapush.com/sign-up-for-a-free-trial/">our web site</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Get free trial</div>
<div class="paragraph">
<p>Now, when you asking for a free trial, the <strong>ZetaPush account</strong> and the <strong>application</strong> are created by ZetaPush to fit your needs. Soon we will open access to everyone for get a free trial of 30 days. In this case the account and the application will be automatically created.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_create_application_via_web_console"><a class="anchor" href="#_create_application_via_web_console"></a>Create application via web console</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Create application via web console</div>
<div class="paragraph">
<p>For now, the creation of an application via the <strong>web console</strong> is not available because we want to assist you.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_create_application_via_cli"><a class="anchor" href="#_create_application_via_cli"></a>Create application via CLI</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Create application via CLI</div>
<div class="paragraph">
<p>For now, the creation of an application via the <strong>CLI</strong> is not available because we want to assist you.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="access_control_per_application"><a class="anchor" href="#access_control_per_application"></a>Access control per application</h4>
<div class="paragraph">
<p>As <a href="#manage_organization">seen previously</a>, an <strong>organization</strong> can have several teams or/and several applications. So you may want to control who can work on which application.</p>
</div>
<div class="sect4">
<h5 id="_grant_access_rights"><a class="anchor" href="#_grant_access_rights"></a>Grant access rights</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Contact us to manage access rights</div>
<div class="paragraph">
<p>Security per application is not currently available to our clients. Instead we prefer that you <a href="https://www.zetapush.com/contact">contact us</a> to understand your needs and to guide you how to organize your teams and application.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_remove_access_rights"><a class="anchor" href="#_remove_access_rights"></a>Remove access rights</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Contact us to remove access rights</div>
<div class="paragraph">
<p>Security per application is not currently available to our clients. Instead we prefer that you <a href="https://www.zetapush.com/contact">contact us</a> to understand your needs and to guide you how to organize your teams and application.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="manage_environments"><a class="anchor" href="#manage_environments"></a>Manage environments</h3>
<div class="paragraph">
<p>An <strong>application</strong> is a logical container designed to perform a group of coordinated tasks or activities for the benefit of the user.</p>
</div>
<div class="sect3">
<h4 id="add_environment"><a class="anchor" href="#add_environment"></a>Add an environment</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Environment support</div>
<div class="paragraph">
<p>The <strong>environment</strong> support is not completely done. It will be soon because it is our next high priority. The management of this environments will be done via the <strong>web console</strong>. If you want to use environments you can anyway <a href="https://www.zetapush.com/contact">contact us</a> to manage them for you.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="access_control_per_environment"><a class="anchor" href="#access_control_per_environment"></a>Access control per environment</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Environment support</div>
<div class="paragraph">
<p>The <strong>environment</strong> support is not completely done. It will be soon because it is our next high priority. The access control of the environments will be done via the <strong>web console</strong>. If you want to use environments you can anyway <a href="https://www.zetapush.com/contact">contact us</a> to manage them for you.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture"><a class="anchor" href="#_architecture"></a>Architecture</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_general_architecture"><a class="anchor" href="#_general_architecture"></a>General architecture</h3>
<div class="paragraph">
<p>One of the most important thing to understand with ZetaPush is that you can use it in two steps: The <strong>run</strong> and the <strong>push</strong>. The <code>run</code> mode is when you develop your application, your <strong>worker</strong> is running locally and the <code>push</code> mode is when you have pushed your application on the <strong>ZetaPush Cloud</strong> and that your worker is running on it.</p>
</div>
<div class="imageblock center">
<div class="content">
<img src="process-dev-run-and-push.png" alt="process dev run and push" width="993" height="337">
</div>
<div class="title">Figure 1. Process of development with ZetaPush</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="title">Data between the two phases</div>
<div class="paragraph">
<p>Whether you run or push your application, you use the same data. For example, if you store data during your development phase (using the <code>zeta run</code> command), They will always be present in the database when you will deploy your application with <code>zeta push</code>. For a more comprehensive working, look that scheme below :</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock center">
<div class="content">
<img src="custom-cloud-service-dev.png" alt="custom cloud service dev" width="709" height="430">
</div>
<div class="title">Figure 2. Interactions during development phase</div>
</div>
<div class="paragraph">
<p>Both front and worker are running locally. The front interacts with <em>custom cloud services</em> contained in the worker through
ZetaPush Cloud.
As ZetaPush Cloud provides bidirectional connection, the <em>custom cloud services</em> can also interact with the front through
ZetaPush Cloud too.</p>
</div>
<div class="paragraph">
<p>A <em>custom cloud service</em> can interact with <em>built-in cloud services</em> provided by ZetaPush.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When you start using ZetaPush, you only develop locally so from your point of vue,
your front seems to directly interact with your <em>custom cloud services</em>.</p>
</div>
<div class="paragraph">
<p>In fact, all messages go through the Internet and ZetaPush Cloud.
It means that a published front can interact with a worker that is running locally and vice versa.</p>
</div>
<div class="paragraph">
<p>See <a href="#mix_local_and_remote">how to mix local worker with worker running in cloud</a></p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_zetapush_choices"><a class="anchor" href="#_zetapush_choices"></a>ZetaPush choices</h3>
<div class="sect3">
<h4 id="_high_availability"><a class="anchor" href="#_high_availability"></a>High availability</h4>

</div>
<div class="sect3">
<h4 id="_load_balancing"><a class="anchor" href="#_load_balancing"></a>Load-balancing</h4>

</div>
<div class="sect3">
<h4 id="_scalability"><a class="anchor" href="#_scalability"></a>Scalability</h4>

</div>
<div class="sect3">
<h4 id="_supervision"><a class="anchor" href="#_supervision"></a>Supervision</h4>

</div>
<div class="sect3">
<h4 id="javascript_vs_typescript"><a class="anchor" href="#javascript_vs_typescript"></a>JavaScript vs TypeScript</h4>

</div>
</div>
<div class="sect2">
<h3 id="_application_code_structure"><a class="anchor" href="#_application_code_structure"></a>Application code structure</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_zetapush_development_concepts"><a class="anchor" href="#_zetapush_development_concepts"></a>ZetaPush development concepts</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_npm_modules_provided_by_zetapush"><a class="anchor" href="#_npm_modules_provided_by_zetapush"></a>Npm modules provided by ZetaPush</h3>
<div class="paragraph">
<p>ZetaPush provides several npm modules for helping you in your development. Each module has a specific role.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Module</th>
<th class="tableblock halign-left valign-middle">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/cli</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">Contains the <strong>Command Line Interface</strong> of ZetaPush.
You can launch <code>zeta run</code> or <code>zeta push</code> thanks to this module.<br>
You can have more information in his <a href="#cli">dedicated section</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/client</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">When you <a href="#client_types">develop the front part of your application</a>, i.e. the web pages displayed to your users,
you use a <strong>ZetaPush client</strong> to interact with your worker and the <strong>ZetaPush cloud</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/cometd</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">You don&#8217;t use this module directly.
It is used internally for the communication with the <strong>ZetaPush cloud</strong> via the <a href="https://cometd.org/">CometD</a> protocol.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/common</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">This module includes some functions and classes that are used in other modules.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/core</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">This is the core of <strong>ZetaPush</strong>. Notably, it provides the <a href="#dependency_injection">dependency injection</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/create</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">This module is used when you create a new development project using ZetaPush through the command <code>npm init @zetapush myApp</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/example</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">It contains a basic example of a <strong>ZetaPush application</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/http-server</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">ZetaPush uses a HTTP server for some features, for example to confirm an account in the <a href="#integrate_user_management">Standard User Workflow</a>.
You have information about this module in his <a href="#http_server">dedicated section</a></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/testing</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">ZetaPush integrates testing and provides some useful features about it via this module.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/integration</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">This package is used internally by ZetaPush. It contains end to end tests to ensure that each new version is well tested and that there is no regression.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/platform-legacy</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">ZetaPush contains some <em>Technical Services</em> that are the fundations to build more functional and advanced services. These services will be improved and some may be replaced by a service that matches more your needs.
This module contains them and you have more information about their utilization in the <a href="#builtin_cloud_services">dedicated section</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/troubleshooting</p></td>
<td class="tableblock halign-left valign-middle"><div><div class="paragraph">
<p>When you have a technical error, it can be hard to understand what really happens. This module diagnoses all errors (errors when worker starts, errors when worker is pushed, errors in connection/network&#8230;&#8203;) and gives you an help to understand the error and to help you fix it.</p>
</div>
<div class="paragraph">
<p>For example, a network error can have several causes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Your network card is disabled or misconfigured</p>
</li>
<li>
<p>Your computer can&#8217;t access the Internet</p>
</li>
<li>
<p>Your computer is on a local network with a proxy but proxy is not reachable</p>
</li>
<li>
<p>Your computer is on a local network with a proxy, proxy is reachable but the proxy can&#8217;t access the Internet</p>
</li>
<li>
<p>You have Internet access but ZetaPush cloud is not reachable</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This module will give you help to understand where the problem is and how to fix it.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/user-management</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">In almost every application, you need to provide user management features like user creation, user authentication, profile management&#8230;&#8203; This module provides functional cloud services that directly provides all these features. You don&#8217;t need to bother about implementing it again and again. You just consume one of these cloud services like <a href="#integrate_user_management">StandardUserWorkflow</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">@zetapush/worker</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">This module provides the container that executes the code of your business logic i.e. the worker. It is internally used by the CLI when you launch <code>zeta run</code> or <code>zeta push</code> or by testing tools.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="dependency_injection"><a class="anchor" href="#dependency_injection"></a>Dependency injection</h3>
<div class="paragraph">
<p><strong>Dependency Injection</strong> is a technique whereby one component supplies the dependencies of another component. A dependency is a component that can be used. An injection is the passing of a dependency to a dependent component that would use it.</p>
</div>
<div class="paragraph">
<p>In our case, we the <strong>Dependency Injection</strong> to provides the <em>cloud services</em> (builtin or not) and other classes. The benefic is that you don&#8217;t need to instanciate a dependency. You ask it and you have it.</p>
</div>
<div class="paragraph">
<p>In the following example we need to have the <em>GDA builtin cloud service</em> (database). We ask the dependency injection to provide one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
  <td class="code"><pre><span class="reserved">import</span> { Gda } from <span class="string"><span class="delimiter">'</span><span class="content">@zetapush/platform-legacy</span><span class="delimiter">'</span></span>;

<span class="error">@</span>Injectable()                       <i class="conum" data-value="1"></i><b>(1)</b>
<span class="reserved">export</span> <span class="keyword">default</span> <span class="reserved">class</span> MyApi {
  constructor(<span class="reserved">private</span> gda: Gda) {}  <i class="conum" data-value="2"></i><b>(2)</b>

  putData(name: string) {
    <span class="keyword">return</span> await <span class="local-variable">this</span>.gda.put({     <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="key">table</span>: <span class="string"><span class="delimiter">'</span><span class="content">my-table</span><span class="delimiter">'</span></span>,
      <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">my-column</span><span class="delimiter">'</span></span>,
      <span class="key">key</span>: Date.now().toString(),
      <span class="key">data</span>: name
    });
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Say to the dependency injection that it should provide some dependencies in this class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>I just say that I need a <code>GDA</code> instance in my class</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>I use my dependency. I know that my dependency is automatically instantiated by the <strong>Dependency Injection</strong>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Dependencies are singletons by default</div>
<div class="paragraph">
<p>By default, when you use the dependency injection, each component that is instanciated is a <a href="https://en.wikipedia.org/wiki/Singleton_pattern">singleton</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>ZetaPush uses <a href="https://github.com/mgechev/injection-js">Injection JS</a> library for manage the <strong>Dependency Injection</strong>. It is an extraction of the Angular&#8217;s dependency injection.</p>
</div>
<div class="paragraph">
<p>You can have more information about the dependency injection in the <a href="https://angular.io/guide/dependency-injection">Angular Dependency Injection Documentation</a></p>
</div>
</div>
<div class="sect2">
<h3 id="modules"><a class="anchor" href="#modules"></a>Modules</h3>

</div>
<div class="sect2">
<h3 id="_current_running_context"><a class="anchor" href="#_current_running_context"></a>Current running context</h3>
<div class="sect3">
<h4 id="_environment"><a class="anchor" href="#_environment"></a>Environment</h4>

</div>
<div class="sect3">
<h4 id="_configurationproperties"><a class="anchor" href="#_configurationproperties"></a>ConfigurationProperties</h4>

</div>
<div class="sect3">
<h4 id="_zetapushcontext"><a class="anchor" href="#_zetapushcontext"></a>ZetaPushContext</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_develop_with_zetapush"><a class="anchor" href="#_develop_with_zetapush"></a>Develop with ZetaPush</h2>
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Intro</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_develop_your_front_only"><a class="anchor" href="#_develop_your_front_only"></a>Develop your front only</h3>
<div class="sect3">
<h4 id="client_types"><a class="anchor" href="#client_types"></a>ZetaPush client</h4>

</div>
<div class="sect3">
<h4 id="_web_development"><a class="anchor" href="#_web_development"></a>Web development</h4>
<div class="sect4">
<h5 id="develop_with_angular"><a class="anchor" href="#develop_with_angular"></a>Angular</h5>

</div>
<div class="sect4">
<h5 id="develop_with_react"><a class="anchor" href="#develop_with_react"></a>React</h5>

</div>
<div class="sect4">
<h5 id="develop_with_vue"><a class="anchor" href="#develop_with_vue"></a>Vue.js</h5>

</div>
</div>
<div class="sect3">
<h4 id="_mobile_development"><a class="anchor" href="#_mobile_development"></a>Mobile development</h4>
<div class="sect4">
<h5 id="_android_java"><a class="anchor" href="#_android_java"></a>Android (Java)</h5>

</div>
<div class="sect4">
<h5 id="_android_kotlin"><a class="anchor" href="#_android_kotlin"></a>Android (Kotlin)</h5>

</div>
<div class="sect4">
<h5 id="_ios"><a class="anchor" href="#_ios"></a>iOS</h5>

</div>
</div>
</div>
<div class="sect2">
<h3 id="generate_sdks"><a class="anchor" href="#generate_sdks"></a>Generate SDKs from custom cloud service code</h3>

</div>
<div class="sect2">
<h3 id="_develop_custom_cloud_services"><a class="anchor" href="#_develop_custom_cloud_services"></a>Develop custom cloud services</h3>

</div>
<div class="sect2">
<h3 id="_advanced_usage_of_cloud_services"><a class="anchor" href="#_advanced_usage_of_cloud_services"></a>Advanced usage of cloud services</h3>
<div class="sect3">
<h4 id="several_custom_cloud_services"><a class="anchor" href="#several_custom_cloud_services"></a>Several custom cloud services</h4>

</div>
<div class="sect3">
<h4 id="shared_module"><a class="anchor" href="#shared_module"></a>Create a shared module of cloud services</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_available_cloud_services"><a class="anchor" href="#_available_cloud_services"></a>Available cloud services</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_standard_user_workflow"><a class="anchor" href="#_standard_user_workflow"></a>Standard User Workflow</h3>
<div class="sect3">
<h4 id="_usage"><a class="anchor" href="#_usage"></a>Usage</h4>

</div>
<div class="sect3">
<h4 id="_api"><a class="anchor" href="#_api"></a>API</h4>

</div>
</div>
<div class="sect2">
<h3 id="builtin_cloud_services"><a class="anchor" href="#builtin_cloud_services"></a>Technical cloud services</h3>
<div class="sect3">
<h4 id="_user_management"><a class="anchor" href="#_user_management"></a>User Management</h4>
<div class="sect4">
<h5 id="_simple"><a class="anchor" href="#_simple"></a>Simple</h5>
<div class="paragraph">
<p>End-user API for the simple local authentication</p>
</div>
<div class="paragraph">
<p>These API verbs allow end-users to manage their account(s).</p>
</div>
<div class="sect5">
<h6 id="_createuser"><a class="anchor" href="#_createuser"></a>createUser</h6>
<div class="paragraph">
<p>Creates a new account in this 'simple' authentication realm.
Returns a map of account fields, including a field named &lt;i&gt;zetapushKey&lt;/i&gt; containing the global user key of the user (value of the &lt;b&gt;__userKey&lt;/b&gt; pseudo-constant when this new account will be used)</p>
</div>
<div class="listingblock">
<div class="title">createUser(parameters: <a href="./common/cloud-services-types/basic-authenticated-user.html">BasicAuthenticatedUser</a>): Promise&lt;<a href="./common/cloud-services-types/map&.html#8592;string">-object&gt;.adoc#,Map&lt;String,Object</a>&gt;&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.simple.createUser(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_credentials"><a class="anchor" href="#_credentials"></a>credentials</h6>
<div class="paragraph">
<p>Returns the list of account credentials in this service for the asking user.
Might return an empty list.</p>
</div>
<div class="listingblock">
<div class="title">credentials(parameters: <a href="./common/cloud-services-types/impersonated-traceable-request.html">ImpersonatedTraceableRequest</a>): Promise&lt;<a href="./common/cloud-services-types/all-credentials.html">AllCredentials</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.simple.credentials(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_updatekey"><a class="anchor" href="#_updatekey"></a>updateKey</h6>
<div class="paragraph">
<p>Updates an existing account primary key (login, NOT &lt;b&gt;__userKey&lt;/b&gt;) in this 'simple' authentication realm.
The updated account MUST belong to the user making the call.
The configured login field MUST be given, as a user (identified by his zetapush userKey) might possess several accounts.
Returns a map of account fields</p>
</div>
<div class="listingblock">
<div class="title">updateKey(parameters: <a href="./common/cloud-services-types/user-loginchange.html">UserLoginchange</a>): Promise&lt;<a href="./common/cloud-services-types/map&.html#8592;string">-object&gt;.adoc#,Map&lt;String,Object</a>&gt;&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.simple.updateKey(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_updateuser"><a class="anchor" href="#_updateuser"></a>updateUser</h6>
<div class="paragraph">
<p>Updates an existing account in this 'simple' authentication realm.
The updated account MUST belong to the user making the call.
The configured login field MUST be given, as a user (identified by his zetapush userKey) might possess several accounts.
Returns a map of account fields</p>
</div>
<div class="listingblock">
<div class="title">updateUser(parameters: <a href="./common/cloud-services-types/basic-authenticated-user.html">BasicAuthenticatedUser</a>): Promise&lt;<a href="./common/cloud-services-types/map&.html#8592;string">-object&gt;.adoc#,Map&lt;String,Object</a>&gt;&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.simple.updateUser(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_deleteuser"><a class="anchor" href="#_deleteuser"></a>deleteUser</h6>
<div class="paragraph">
<p>Deletes an existing account in this 'simple' authentication realm.</p>
</div>
<div class="listingblock">
<div class="title">deleteUser(parameters: <a href="./common/cloud-services-types/existence-check.html">ExistenceCheck</a>): Promise&lt;<a href="./common/cloud-services-types/existence-check.html">ExistenceCheck</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.simple.deleteUser(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_checkuser"><a class="anchor" href="#_checkuser"></a>checkUser</h6>
<div class="paragraph">
<p>Checks whether the given account already exists in this 'simple' authentication realm.
This verb returns all the information about the user, including non public fields.</p>
</div>
<div class="listingblock">
<div class="title">checkUser(parameters: <a href="./common/cloud-services-types/existence-check.html">ExistenceCheck</a>): Promise&lt;<a href="./common/cloud-services-types/map&.html#8592;string">-object&gt;.adoc#,Map&lt;String,Object</a>&gt;&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.simple.checkUser(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_requestreset"><a class="anchor" href="#_requestreset"></a>requestReset</h6>
<div class="paragraph">
<p>Requests a password reset for the given unique account key.
The account key must exist and must be given, as it cannot obviously be deduced from the currently logged in user.
The returned token needs to be sent to the intended recipient only. The typical use case is to define a macro that requests a reset, generates a email template and emails the user. The macro can then be safely called by a weakly authenticated user.
Requesting a reset does not invalidate the password.
Requesting a reset again invalidates previous reset requests (only the last token is usable)</p>
</div>
<div class="listingblock">
<div class="title">requestReset(parameters: <a href="./common/cloud-services-types/reset-request.html">ResetRequest</a>): Promise&lt;<a href="./common/cloud-services-types/reset-info.html">ResetInfo</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.simple.requestReset(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_changepassword"><a class="anchor" href="#_changepassword"></a>changePassword</h6>
<div class="paragraph">
<p>Changes a user password for this authentication realm.
The user can be either explicit, implicit (one of the current user&#8217;s accounts) or deduced from the token.
You should provide at least one of 'key' and 'token'. If you do not, the server will try and find any key for the current user.
The change is effective immediately. However, already logged in users might stay connected.
The password and token fields are always null in the output.</p>
</div>
<div class="listingblock">
<div class="title">changePassword(parameters: <a href="./common/cloud-services-types/change-password-request.html">ChangePasswordRequest</a>): Promise&lt;<a href="./common/cloud-services-types/change-password-request.html">ChangePasswordRequest</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.simple.changePassword(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_checkpassword"><a class="anchor" href="#_checkpassword"></a>checkPassword</h6>
<div class="listingblock">
<div class="title">checkPassword(parameters: <a href="./common/cloud-services-types/check-password-request.html">CheckPasswordRequest</a>): Promise&lt;<a href="./common/cloud-services-types/check-password-result.html">CheckPasswordResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.simple.checkPassword(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it"><a class="anchor" href="#_how_to_use_it"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Simple, BasicAuthenticatedUser } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private simple: Simple <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: BasicAuthenticatedUser) {
    const response = await this.simple.createUser(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Simple</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_weak"><a class="anchor" href="#_weak"></a>Weak</h5>
<div class="paragraph">
<p>User API for weak devices control</p>
</div>
<div class="paragraph">
<p>User API for control and release of weakly authenticated user sessions.</p>
</div>
<div class="sect5">
<h6 id="_control"><a class="anchor" href="#_control"></a>control</h6>
<div class="paragraph">
<p>Takes control of a weak user session, identified by the given public token.
The public token has been previously made available by the controlled device, for example by displaying a QRCode.
Upon control notification, the client SDK of the controlled session is expected to re-handshake.</p>
</div>
<div class="listingblock">
<div class="title">control(parameters: <a href="./common/cloud-services-types/user-control-request.html">UserControlRequest</a>): Promise&lt;<a href="./common/cloud-services-types/user-control-status.html">UserControlStatus</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.weak.control(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_release"><a class="anchor" href="#_release"></a>release</h6>
<div class="paragraph">
<p>Releases control of a weak user session, identified by the given public token.
The weak user session must have been previously controlled by a call to 'control'.</p>
</div>
<div class="listingblock">
<div class="title">release(parameters: <a href="./common/cloud-services-types/user-control-request.html">UserControlRequest</a>): Promise&lt;<a href="./common/cloud-services-types/user-control-status.html">UserControlStatus</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.weak.release(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_provision"><a class="anchor" href="#_provision"></a>provision</h6>
<div class="paragraph">
<p>Provisions an arbitrary number of accounts.
The maximum number of accounts that you can create in one single call is configured per server.</p>
</div>
<div class="listingblock">
<div class="title">provision(parameters: <a href="./common/cloud-services-types/provisioning-request.html">ProvisioningRequest</a>): Promise&lt;<a href="./common/cloud-services-types/provisioning-result.html">ProvisioningResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.weak.provision(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_gettoken"><a class="anchor" href="#_gettoken"></a>getToken</h6>
<div class="paragraph">
<p>Returns your current session&#8217;s private token. The token field may be null, if you did not log in with this authentication.
The token can be used to log in as the same weak user another time.</p>
</div>
<div class="listingblock">
<div class="title">getToken(parameters: <a href="./common/cloud-services-types/.html">undefined</a>): Promise&lt;<a href="./common/cloud-services-types/user-token.html">UserToken</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.weak.getToken(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_2"><a class="anchor" href="#_how_to_use_it_2"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Weak, UserControlRequest } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private weak: Weak <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: UserControlRequest) {
    const response = await this.weak.control(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Weak</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_userdir"><a class="anchor" href="#_userdir"></a>Userdir</h5>
<div class="paragraph">
<p>User API for user information</p>
</div>
<div class="sect5">
<h6 id="_userinfo"><a class="anchor" href="#_userinfo"></a>userInfo</h6>
<div class="listingblock">
<div class="title">userInfo(parameters: <a href="./common/cloud-services-types/user-info-request.html">UserInfoRequest</a>): Promise&lt;<a href="./common/cloud-services-types/user-info-response.html">UserInfoResponse</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.userdir.userInfo(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_search"><a class="anchor" href="#_search"></a>search</h6>
<div class="listingblock">
<div class="title">search(parameters: <a href="./common/cloud-services-types/user-search-request.html">UserSearchRequest</a>): Promise&lt;<a href="./common/cloud-services-types/user-search-response.html">UserSearchResponse</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.userdir.search(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_3"><a class="anchor" href="#_how_to_use_it_3"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Userdir, UserInfoRequest } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private userdir: Userdir <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: UserInfoRequest) {
    const response = await this.userdir.userInfo(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Userdir</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_groups"><a class="anchor" href="#_groups"></a>Groups</h5>
<div class="paragraph">
<p>User API for groups and rights.</p>
</div>
<div class="paragraph">
<p>Groups are stored per user.
This means that two users can own a group with the same identifier. A couple (owner, group) is needed to uniquely identify a group inside a group management service.
The triplet (deploymentId, owner, group) is actually needed to fully qualify a group outside of the scope of this service.</p>
</div>
<div class="sect5">
<h6 id="_grant"><a class="anchor" href="#_grant"></a>grant</h6>
<div class="paragraph">
<p>The granting API does not do any check when storing permissions.
In particular when granting rights on a verb and resource of another API, the existence of said verb and resource is not checked.</p>
</div>
<div class="listingblock">
<div class="title">grant(parameters: <a href="./common/cloud-services-types/grant.html">Grant</a>): Promise&lt;<a href="./common/cloud-services-types/grant.html">Grant</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.grant(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_creategroup"><a class="anchor" href="#_creategroup"></a>createGroup</h6>
<div class="paragraph">
<p>Creates a group owned by the current user.
Group creation may fail if the group already exists.</p>
</div>
<div class="listingblock">
<div class="title">createGroup(parameters: <a href="./common/cloud-services-types/group-info.html">GroupInfo</a>): Promise&lt;<a href="./common/cloud-services-types/group-info.html">GroupInfo</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.createGroup(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_listownedgroups"><a class="anchor" href="#_listownedgroups"></a>listOwnedGroups</h6>
<div class="paragraph">
<p>Returns the whole list of groups owned by the current user</p>
</div>
<div class="listingblock">
<div class="title">listOwnedGroups(parameters: <a href="./common/cloud-services-types/traceable-paginated-impersonated-request.html">TraceablePaginatedImpersonatedRequest</a>): Promise&lt;<a href="./common/cloud-services-types/owned-groups.html">OwnedGroups</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.listOwnedGroups(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_listdetailedownedgroups"><a class="anchor" href="#_listdetailedownedgroups"></a>listDetailedOwnedGroups</h6>
<div class="paragraph">
<p>Returns the whole list of groups owned by the current user, with their members</p>
</div>
<div class="listingblock">
<div class="title">listDetailedOwnedGroups(parameters: <a href="./common/cloud-services-types/traceable-paginated-impersonated-request.html">TraceablePaginatedImpersonatedRequest</a>): Promise&lt;<a href="./common/cloud-services-types/owned-groups-with-details.html">OwnedGroupsWithDetails</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.listDetailedOwnedGroups(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_mygroups"><a class="anchor" href="#_mygroups"></a>myGroups</h6>
<div class="paragraph">
<p>Returns the whole list of groups the current user is part of.
Groups may be owned by anyone, including the current user.</p>
</div>
<div class="listingblock">
<div class="title">myGroups(parameters: <a href="./common/cloud-services-types/impersonated-request.html">ImpersonatedRequest</a>): Promise&lt;<a href="./common/cloud-services-types/group-info.html">GroupInfo</a>[]&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.myGroups(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_listjoinedgroups"><a class="anchor" href="#_listjoinedgroups"></a>listJoinedGroups</h6>
<div class="paragraph">
<p>Returns the whole list of groups the current user is part of.
Groups may be owned by anyone, including the current user.</p>
</div>
<div class="listingblock">
<div class="title">listJoinedGroups(parameters: <a href="./common/cloud-services-types/traceable-paginated-impersonated-request.html">TraceablePaginatedImpersonatedRequest</a>): Promise&lt;<a href="./common/cloud-services-types/joined-groups.html">JoinedGroups</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.listJoinedGroups(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_delgroup"><a class="anchor" href="#_delgroup"></a>delGroup</h6>
<div class="paragraph">
<p>Removes the given group owned by the current user or the given owner.
Also removes all grants to that group.</p>
</div>
<div class="listingblock">
<div class="title">delGroup(parameters: <a href="./common/cloud-services-types/group-related.html">GroupRelated</a>): Promise&lt;<a href="./common/cloud-services-types/group-related.html">GroupRelated</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.delGroup(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_addme"><a class="anchor" href="#_addme"></a>addMe</h6>
<div class="paragraph">
<p>Adds me (the caller) to a group.
This verb exists so that group owners may grant the right to join their groups without granting the right to add other users to those groups.
The 'user' field is implicitly set to the current user&#8217;s key.</p>
</div>
<div class="listingblock">
<div class="title">addMe(parameters: <a href="./common/cloud-services-types/user-group.html">UserGroup</a>): Promise&lt;<a href="./common/cloud-services-types/user-group.html">UserGroup</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.addMe(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_memberof"><a class="anchor" href="#_memberof"></a>memberOf</h6>
<div class="paragraph">
<p>Tests whether I (the caller) am a member of the given group.
This verb exists so that users can determine if they are part of a group without being granted particular rights.
The 'user' field is implicitly set to the current user&#8217;s key.</p>
</div>
<div class="listingblock">
<div class="title">memberOf(parameters: <a href="./common/cloud-services-types/user-membership.html">UserMembership</a>): Promise&lt;<a href="./common/cloud-services-types/user-group-membership.html">UserGroupMembership</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.memberOf(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_addusers"><a class="anchor" href="#_addusers"></a>addUsers</h6>
<div class="paragraph">
<p>Users are processed in the given order
In case of failure in the middle of a user list, this verb may have succeeded to add the first users, but will not continue processing the end of the list.</p>
</div>
<div class="listingblock">
<div class="title">addUsers(parameters: <a href="./common/cloud-services-types/group-users.html">GroupUsers</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.addUsers(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_delusers"><a class="anchor" href="#_delusers"></a>delUsers</h6>
<div class="listingblock">
<div class="title">delUsers(parameters: <a href="./common/cloud-services-types/group-users.html">GroupUsers</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.delUsers(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_mgrant"><a class="anchor" href="#_mgrant"></a>mgrant</h6>
<div class="paragraph">
<p>Grant several rights at once.</p>
</div>
<div class="listingblock">
<div class="title">mgrant(parameters: <a href="./common/cloud-services-types/grants.html">Grants</a>): Promise&lt;<a href="./common/cloud-services-types/grants.html">Grants</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.mgrant(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_mrevoke"><a class="anchor" href="#_mrevoke"></a>mrevoke</h6>
<div class="listingblock">
<div class="title">mrevoke(parameters: <a href="./common/cloud-services-types/grants.html">Grants</a>): Promise&lt;<a href="./common/cloud-services-types/grants.html">Grants</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.mrevoke(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_listgrants"><a class="anchor" href="#_listgrants"></a>listGrants</h6>
<div class="paragraph">
<p>This API lists explicitly configured rights.
Effective rights include configured rights, implicit rights and inherited rights.</p>
</div>
<div class="listingblock">
<div class="title">listGrants(parameters: <a href="./common/cloud-services-types/group-related.html">GroupRelated</a>): Promise&lt;<a href="./common/cloud-services-types/grant-list.html">GrantList</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.listGrants(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_listgroupgrants"><a class="anchor" href="#_listgroupgrants"></a>listGroupGrants</h6>
<div class="paragraph">
<p>This API lists explicitly configured rights.
Effective rights include configured rights, implicit rights and inherited rights.</p>
</div>
<div class="listingblock">
<div class="title">listGroupGrants(parameters: <a href="./common/cloud-services-types/group-related-and-paged.html">GroupRelatedAndPaged</a>): Promise&lt;<a href="./common/cloud-services-types/paged-grant-list.html">PagedGrantList</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.listGroupGrants(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_listpresences"><a class="anchor" href="#_listpresences"></a>listPresences</h6>
<div class="paragraph">
<p>Returns the list of members of the given groups, along with their actual and current presence on the zetapush server.
The current implementation does not include information about the particular devices users are connected with.
If a user is connected twice with two different devices, two identical entries will be returned.</p>
</div>
<div class="listingblock">
<div class="title">listPresences(parameters: <a href="./common/cloud-services-types/group-related.html">GroupRelated</a>): Promise&lt;<a href="./common/cloud-services-types/group-presence.html">GroupPresence</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.listPresences(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_listgrouppresences"><a class="anchor" href="#_listgrouppresences"></a>listGroupPresences</h6>
<div class="paragraph">
<p>Returns the list of members of the given groups, along with their actual and current presence on the zetapush server.
The current implementation does not include information about the particular devices users are connected with.
If a user is connected twice with two different devices, two identical entries will be returned.</p>
</div>
<div class="listingblock">
<div class="title">listGroupPresences(parameters: <a href="./common/cloud-services-types/group-related-and-paged.html">GroupRelatedAndPaged</a>): Promise&lt;<a href="./common/cloud-services-types/paged-group-presence.html">PagedGroupPresence</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.listGroupPresences(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_adduser"><a class="anchor" href="#_adduser"></a>addUser</h6>
<div class="paragraph">
<p>Adds the given user to the given group.
Addition may fail if the given group does not already exist.</p>
</div>
<div class="listingblock">
<div class="title">addUser(parameters: <a href="./common/cloud-services-types/user-group.html">UserGroup</a>): Promise&lt;<a href="./common/cloud-services-types/user-group.html">UserGroup</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.addUser(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_deluser"><a class="anchor" href="#_deluser"></a>delUser</h6>
<div class="listingblock">
<div class="title">delUser(parameters: <a href="./common/cloud-services-types/user-group.html">UserGroup</a>): Promise&lt;<a href="./common/cloud-services-types/user-group.html">UserGroup</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.delUser(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_groupusers"><a class="anchor" href="#_groupusers"></a>groupUsers</h6>
<div class="paragraph">
<p>Returns the whole list of users configured inside the given group.</p>
</div>
<div class="listingblock">
<div class="title">groupUsers(parameters: <a href="./common/cloud-services-types/group-related.html">GroupRelated</a>): Promise&lt;<a href="./common/cloud-services-types/group-users.html">GroupUsers</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.groupUsers(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_revoke"><a class="anchor" href="#_revoke"></a>revoke</h6>
<div class="listingblock">
<div class="title">revoke(parameters: <a href="./common/cloud-services-types/grant.html">Grant</a>): Promise&lt;<a href="./common/cloud-services-types/grant.html">Grant</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.revoke(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_allgroups"><a class="anchor" href="#_allgroups"></a>allGroups</h6>
<div class="paragraph">
<p>Returns the whole list of groups owned by the current user, with their members</p>
</div>
<div class="listingblock">
<div class="title">allGroups(parameters: <a href="./common/cloud-services-types/impersonated-request.html">ImpersonatedRequest</a>): Promise&lt;<a href="./common/cloud-services-types/group-users.html">GroupUsers</a>[]&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.allGroups(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_groups_2"><a class="anchor" href="#_groups_2"></a>groups</h6>
<div class="paragraph">
<p>Returns the whole list of groups owned by the current user</p>
</div>
<div class="listingblock">
<div class="title">groups(parameters: <a href="./common/cloud-services-types/impersonated-request.html">ImpersonatedRequest</a>): Promise&lt;<a href="./common/cloud-services-types/group-info.html">GroupInfo</a>[]&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.groups(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_check"><a class="anchor" href="#_check"></a>check</h6>
<div class="paragraph">
<p>This API checks if the given user has the proper authorizations to perform the given action on the owner&#8217;s resource.
If you give the same value for 'user' and 'owner', the check always passes.</p>
</div>
<div class="listingblock">
<div class="title">check(parameters: <a href="./common/cloud-services-types/grant-check-request.html">GrantCheckRequest</a>): Promise&lt;<a href="./common/cloud-services-types/grant-check-result.html">GrantCheckResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.check(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_exists"><a class="anchor" href="#_exists"></a>exists</h6>
<div class="paragraph">
<p>Returns whether a group exists or not.</p>
</div>
<div class="listingblock">
<div class="title">exists(parameters: <a href="./common/cloud-services-types/group-related.html">GroupRelated</a>): Promise&lt;<a href="./common/cloud-services-types/group-existence.html">GroupExistence</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.groups.exists(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_4"><a class="anchor" href="#_how_to_use_it_4"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Groups, Grant } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private groups: Groups <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: Grant) {
    const response = await this.groups.grant(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Groups</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_management"><a class="anchor" href="#_data_management"></a>Data Management</h4>
<div class="sect4">
<h5 id="_gda"><a class="anchor" href="#_gda"></a>Gda</h5>
<div class="paragraph">
<p>GDA User API</p>
</div>
<div class="paragraph">
<p>User API for Generic Data Access.
The data are stored on a per-user basis.
Users can put, get, list their data.</p>
</div>
<div class="sect5">
<h6 id="_puts"><a class="anchor" href="#_puts"></a>puts</h6>
<div class="paragraph">
<p>Creates or replaces the (maybe partial) contents of a collection of rows.
This method only creates or replaces cells for non-null input values.</p>
</div>
<div class="listingblock">
<div class="title">puts(parameters: <a href="./common/cloud-services-types/gda-puts.html">GdaPuts</a>): Promise&lt;<a href="./common/cloud-services-types/gda-puts-result.html">GdaPutsResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.puts(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_inc"><a class="anchor" href="#_inc"></a>inc</h6>
<div class="paragraph">
<p>Increments a cell 64-bit signed integer value and returns the result in the data field.
The increment is atomic : if you concurrently increment 10 times a value by 1, the final result will be the initial value plus 10. The actual individual resulting values seen by the 10 concurrent callers may vary discontinuously, with duplicates : at least one of them will see the final (+10) result.</p>
</div>
<div class="listingblock">
<div class="title">inc(parameters: <a href="./common/cloud-services-types/gda-put.html">GdaPut</a>): Promise&lt;<a href="./common/cloud-services-types/gda-put.html">GdaPut</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.inc(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_removerow"><a class="anchor" href="#_removerow"></a>removeRow</h6>
<div class="paragraph">
<p>Removes all columns of the given row from the given table.</p>
</div>
<div class="listingblock">
<div class="title">removeRow(parameters: <a href="./common/cloud-services-types/gda-row-request.html">GdaRowRequest</a>): Promise&lt;<a href="./common/cloud-services-types/gda-row-request.html">GdaRowRequest</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.removeRow(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_removecolumn"><a class="anchor" href="#_removecolumn"></a>removeColumn</h6>
<div class="paragraph">
<p>Removes all cells of the given column of the given row from the given table.</p>
</div>
<div class="listingblock">
<div class="title">removeColumn(parameters: <a href="./common/cloud-services-types/gda-column-request.html">GdaColumnRequest</a>): Promise&lt;<a href="./common/cloud-services-types/gda-column-request.html">GdaColumnRequest</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.removeColumn(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_removecell"><a class="anchor" href="#_removecell"></a>removeCell</h6>
<div class="paragraph">
<p>Removes only one cell of the given column of the given row from the given table.</p>
</div>
<div class="listingblock">
<div class="title">removeCell(parameters: <a href="./common/cloud-services-types/gda-cell-request.html">GdaCellRequest</a>): Promise&lt;<a href="./common/cloud-services-types/gda-cell-request.html">GdaCellRequest</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.removeCell(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_mget"><a class="anchor" href="#_mget"></a>mget</h6>
<div class="paragraph">
<p>Returns full data rows, in the order they were asked.</p>
</div>
<div class="listingblock">
<div class="title">mget(parameters: <a href="./common/cloud-services-types/gda-multi-get-request.html">GdaMultiGetRequest</a>): Promise&lt;<a href="./common/cloud-services-types/gda-multi-get-result.html">GdaMultiGetResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.mget(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_getcells"><a class="anchor" href="#_getcells"></a>getCells</h6>
<div class="paragraph">
<p>Returns a precise list of cells from a column in a data row.</p>
</div>
<div class="listingblock">
<div class="title">getCells(parameters: <a href="./common/cloud-services-types/gda-cells-request.html">GdaCellsRequest</a>): Promise&lt;<a href="./common/cloud-services-types/gda-cells-result.html">GdaCellsResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.getCells(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_get"><a class="anchor" href="#_get"></a>get</h6>
<div class="paragraph">
<p>Returns a full data row.</p>
</div>
<div class="listingblock">
<div class="title">get(parameters: <a href="./common/cloud-services-types/gda-get.html">GdaGet</a>): Promise&lt;<a href="./common/cloud-services-types/gda-get-result.html">GdaGetResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.get(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_put"><a class="anchor" href="#_put"></a>put</h6>
<div class="paragraph">
<p>Creates or replaces the contents of a particular cell.</p>
</div>
<div class="listingblock">
<div class="title">put(parameters: <a href="./common/cloud-services-types/gda-put.html">GdaPut</a>): Promise&lt;<a href="./common/cloud-services-types/gda-put.html">GdaPut</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.put(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_list"><a class="anchor" href="#_list"></a>list</h6>
<div class="paragraph">
<p>Returns a paginated list of rows from the given table.</p>
</div>
<div class="listingblock">
<div class="title">list(parameters: <a href="./common/cloud-services-types/gda-list.html">GdaList</a>): Promise&lt;<a href="./common/cloud-services-types/gda-list-result.html">GdaListResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.list(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_removerange"><a class="anchor" href="#_removerange"></a>removeRange</h6>
<div class="paragraph">
<p>Removes the specified columns of the given range of rows from the given table.</p>
</div>
<div class="listingblock">
<div class="title">removeRange(parameters: <a href="./common/cloud-services-types/gda-remove-range.html">GdaRemoveRange</a>): Promise&lt;<a href="./common/cloud-services-types/gda-remove-range.html">GdaRemoveRange</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.removeRange(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_filter"><a class="anchor" href="#_filter"></a>filter</h6>
<div class="paragraph">
<p>Similar to range, but rows can be filtered out according to a developer-supplied predicate.
A range consists of consecutive rows from the start key (inclusive) to the stop key (exclusive).
You can specify partial keys for the start and stop fields.</p>
</div>
<div class="listingblock">
<div class="title">filter(parameters: <a href="./common/cloud-services-types/gda-filter-request.html">GdaFilterRequest</a>): Promise&lt;<a href="./common/cloud-services-types/gda-filter-result.html">GdaFilterResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.filter(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_range"><a class="anchor" href="#_range"></a>range</h6>
<div class="paragraph">
<p>Returns a paginated range of rows from the given table.
A range consists of consecutive rows from the start key (inclusive) to the stop key (exclusive).
You can specify partial keys for the start and stop fields.</p>
</div>
<div class="listingblock">
<div class="title">range(parameters: <a href="./common/cloud-services-types/gda-range.html">GdaRange</a>): Promise&lt;<a href="./common/cloud-services-types/gda-range-result.html">GdaRangeResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.range(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_reduce"><a class="anchor" href="#_reduce"></a>reduce</h6>
<div class="paragraph">
<p>Returns a computed single reduced result from a range of rows from the given table.
A range consists of consecutive rows from the start key (inclusive) to the stop key (exclusive).
You can specify partial keys for the start and stop fields.</p>
</div>
<div class="listingblock">
<div class="title">reduce(parameters: <a href="./common/cloud-services-types/gda-reduce-request.html">GdaReduceRequest</a>): Promise&lt;<a href="./common/cloud-services-types/gda-reduce-result.html">GdaReduceResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.gda.reduce(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_5"><a class="anchor" href="#_how_to_use_it_5"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Gda, GdaPuts } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private gda: Gda <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: GdaPuts) {
    const response = await this.gda.puts(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Gda</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_stack"><a class="anchor" href="#_stack"></a>Stack</h5>
<div class="paragraph">
<p>Data stack user API</p>
</div>
<div class="paragraph">
<p>Data is stored on a per user basis. However, notifications can be sent to a configurable set of listeners.
Stack names are arbitrary and do not need to be explicitly initialized.</p>
</div>
<div class="sect5">
<h6 id="_purge"><a class="anchor" href="#_purge"></a>purge</h6>
<div class="paragraph">
<p>Removes all items from the given stack.</p>
</div>
<div class="listingblock">
<div class="title">purge(parameters: <a href="./common/cloud-services-types/stack-request.html">StackRequest</a>): Promise&lt;<a href="./common/cloud-services-types/stack-request.html">StackRequest</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.stack.purge(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_getlisteners"><a class="anchor" href="#_getlisteners"></a>getListeners</h6>
<div class="paragraph">
<p>Returns the whole list of listeners for the given stack.</p>
</div>
<div class="listingblock">
<div class="title">getListeners(parameters: <a href="./common/cloud-services-types/stack-request.html">StackRequest</a>): Promise&lt;<a href="./common/cloud-services-types/stack-listeners.html">StackListeners</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.stack.getListeners(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_setlisteners"><a class="anchor" href="#_setlisteners"></a>setListeners</h6>
<div class="paragraph">
<p>Sets the listeners for the given stack.</p>
</div>
<div class="listingblock">
<div class="title">setListeners(parameters: <a href="./common/cloud-services-types/stack-listeners.html">StackListeners</a>): Promise&lt;<a href="./common/cloud-services-types/stack-listeners.html">StackListeners</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.stack.setListeners(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_remove"><a class="anchor" href="#_remove"></a>remove</h6>
<div class="paragraph">
<p>Removes the item with the given guid from the given stack.</p>
</div>
<div class="listingblock">
<div class="title">remove(parameters: <a href="./common/cloud-services-types/stack-item-remove.html">StackItemRemove</a>): Promise&lt;<a href="./common/cloud-services-types/stack-item-remove.html">StackItemRemove</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.stack.remove(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_update"><a class="anchor" href="#_update"></a>update</h6>
<div class="paragraph">
<p>Updates an existing item of the given stack.
The item MUST exist prior to the call.</p>
</div>
<div class="listingblock">
<div class="title">update(parameters: <a href="./common/cloud-services-types/stack-item-add.html">StackItemAdd</a>): Promise&lt;<a href="./common/cloud-services-types/stack-item-add.html">StackItemAdd</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.stack.update(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_push"><a class="anchor" href="#_push"></a>push</h6>
<div class="paragraph">
<p>Pushes an item onto the given stack.
The stack does not need to be created.</p>
</div>
<div class="listingblock">
<div class="title">push(parameters: <a href="./common/cloud-services-types/stack-item-add.html">StackItemAdd</a>): Promise&lt;<a href="./common/cloud-services-types/stack-item-add.html">StackItemAdd</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.stack.push(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_list_2"><a class="anchor" href="#_list_2"></a>list</h6>
<div class="paragraph">
<p>Returns a paginated list of contents for the given stack.
Content is sorted according to the statically configured order.</p>
</div>
<div class="listingblock">
<div class="title">list(parameters: <a href="./common/cloud-services-types/stack-list-request.html">StackListRequest</a>): Promise&lt;<a href="./common/cloud-services-types/stack-list-response.html">StackListResponse</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.stack.list(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_6"><a class="anchor" href="#_how_to_use_it_6"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Stack, StackRequest } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private stack: Stack <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: StackRequest) {
    const response = await this.stack.purge(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Stack</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_search_2"><a class="anchor" href="#_search_2"></a>Search</h5>
<div class="paragraph">
<p>ElasticSearch Service</p>
</div>
<div class="paragraph">
<p>This API is a very thin wrapper around ElasticSearch&#8217;s API.</p>
</div>
<div class="sect5">
<h6 id="_index"><a class="anchor" href="#_index"></a>index</h6>
<div class="paragraph">
<p>Inserts or updates a document into the elasticsearch engine.</p>
</div>
<div class="listingblock">
<div class="title">index(parameters: <a href="./common/cloud-services-types/search-data.html">SearchData</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.search.index(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_get_2"><a class="anchor" href="#_get_2"></a>get</h6>
<div class="paragraph">
<p>Retrieves a document from the elasticsearch engine by id.</p>
</div>
<div class="listingblock">
<div class="title">get(parameters: <a href="./common/cloud-services-types/search-document-id.html">SearchDocumentId</a>): Promise&lt;<a href="./common/cloud-services-types/search-data.html">SearchData</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.search.get(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_delete"><a class="anchor" href="#_delete"></a>delete</h6>
<div class="paragraph">
<p>Deletes a document from the elasticsearch engine by id.</p>
</div>
<div class="listingblock">
<div class="title">delete(parameters: <a href="./common/cloud-services-types/search-document-id.html">SearchDocumentId</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.search.delete(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_search_3"><a class="anchor" href="#_search_3"></a>search</h6>
<div class="listingblock">
<div class="title">search(parameters: <a href="./common/cloud-services-types/search-request.html">SearchRequest</a>): Promise&lt;<a href="./common/cloud-services-types/search-results.html">SearchResults</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.search.search(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_7"><a class="anchor" href="#_how_to_use_it_7"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Search, SearchData } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private search: Search <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: SearchData) {
    const response = await this.search.index(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Search</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_file_management"><a class="anchor" href="#_file_management"></a>File Management</h4>
<div class="sect4">
<h5 id="_zpfs_hdfs"><a class="anchor" href="#_zpfs_hdfs"></a>Zpfs_hdfs</h5>
<div class="paragraph">
<p>User API for local file management</p>
</div>
<div class="paragraph">
<p>User API for file content manipulation
User API for virtual file management and http file upload
This API contains all the verbs needed to browse, upload and remove files.
Files are stored on a per-user basis: each user has his or her own whole virtual filesystem.
Uploading a file is a 3-step process : request an upload URL, upload via HTTP, notify this service of completion.</p>
</div>
<div class="sect5">
<h6 id="_readtoken"><a class="anchor" href="#_readtoken"></a>readToken</h6>
<div class="paragraph">
<p>Requests a token. This token can be used to retrieve a compressed folder via HTTP.</p>
</div>
<div class="listingblock">
<div class="title">readToken(parameters: <a href="./common/cloud-services-types/zpfs-request.html">ZpfsRequest</a>): Promise&lt;<a href="./common/cloud-services-types/zpfs-token.html">ZpfsToken</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.readToken(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_create"><a class="anchor" href="#_create"></a>create</h6>
<div class="paragraph">
<p>Creates a file, writes content and closes the file as a single operation.
Calling this verb is functionnally equivalent to successively calling 'newUploadUrl', posting the content and calling 'newFile'</p>
</div>
<div class="listingblock">
<div class="title">create(parameters: <a href="./common/cloud-services-types/file-creation-request.html">FileCreationRequest</a>): Promise&lt;<a href="./common/cloud-services-types/listing-entry-info.html">ListingEntryInfo</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.create(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_open"><a class="anchor" href="#_open"></a>open</h6>
<div class="paragraph">
<p>Opens a file for reading.</p>
</div>
<div class="listingblock">
<div class="title">open(parameters: <a href="./common/cloud-services-types/zpfs-request.html">ZpfsRequest</a>): Promise&lt;<a href="./common/cloud-services-types/zpfs-file-handler.html">ZpfsFileHandler</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.open(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_link"><a class="anchor" href="#_link"></a>link</h6>
<div class="paragraph">
<p>Links a file or folder to another location.
May fail if the target location is not empty.</p>
</div>
<div class="listingblock">
<div class="title">link(parameters: <a href="./common/cloud-services-types/created-file.html">CreatedFile</a>): Promise&lt;<a href="./common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.link(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_stat"><a class="anchor" href="#_stat"></a>stat</h6>
<div class="paragraph">
<p>Returns information about a single file.
The entry field will be null if the path does not exist</p>
</div>
<div class="listingblock">
<div class="title">stat(parameters: <a href="./common/cloud-services-types/file-stat-request.html">FileStatRequest</a>): Promise&lt;<a href="./common/cloud-services-types/file-stat-result.html">FileStatResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.stat(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_cp"><a class="anchor" href="#_cp"></a>cp</h6>
<div class="paragraph">
<p>Copies a file or folder (recursively) to a new location.
May fail if the target location is not empty.</p>
</div>
<div class="listingblock">
<div class="title">cp(parameters: <a href="./common/cloud-services-types/created-file.html">CreatedFile</a>): Promise&lt;<a href="./common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.cp(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_ls"><a class="anchor" href="#_ls"></a>ls</h6>
<div class="paragraph">
<p>Returns a paginated list of the folder&#8217;s content.</p>
</div>
<div class="listingblock">
<div class="title">ls(parameters: <a href="./common/cloud-services-types/folder-listing-request.html">FolderListingRequest</a>): Promise&lt;<a href="./common/cloud-services-types/folder-listing.html">FolderListing</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.ls(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_mv"><a class="anchor" href="#_mv"></a>mv</h6>
<div class="paragraph">
<p>Moves a file or folder (recursively) to a new location.
May fail if the target location is not empty.</p>
</div>
<div class="listingblock">
<div class="title">mv(parameters: <a href="./common/cloud-services-types/created-file.html">CreatedFile</a>): Promise&lt;<a href="./common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.mv(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_snapshot"><a class="anchor" href="#_snapshot"></a>snapshot</h6>
<div class="paragraph">
<p>Creates a new folder and then copies the given files inside</p>
</div>
<div class="listingblock">
<div class="title">snapshot(parameters: <a href="./common/cloud-services-types/snapshot-creation-request.html">SnapshotCreationRequest</a>): Promise&lt;<a href="./common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.snapshot(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_du"><a class="anchor" href="#_du"></a>du</h6>
<div class="paragraph">
<p>Returns an recursively aggregated number of used bytes, starting at the given path.</p>
</div>
<div class="listingblock">
<div class="title">du(parameters: <a href="./common/cloud-services-types/zpfs-request.html">ZpfsRequest</a>): Promise&lt;<a href="./common/cloud-services-types/zpfs-disk-usage.html">ZpfsDiskUsage</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.du(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_rm"><a class="anchor" href="#_rm"></a>rm</h6>
<div class="paragraph">
<p>Removes a file or folder (recursively).</p>
</div>
<div class="listingblock">
<div class="title">rm(parameters: <a href="./common/cloud-services-types/file-removal.html">FileRemoval</a>): Promise&lt;<a href="./common/cloud-services-types/file-removal.html">FileRemoval</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.rm(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_freeuploadurl"><a class="anchor" href="#_freeuploadurl"></a>freeUploadUrl</h6>
<div class="listingblock">
<div class="title">freeUploadUrl(parameters: <a href="./common/cloud-services-types/file-upload-request.html">FileUploadRequest</a>): Promise&lt;<a href="./common/cloud-services-types/file-upload-location.html">FileUploadLocation</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.freeUploadUrl(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_newuploadurl"><a class="anchor" href="#_newuploadurl"></a>newUploadUrl</h6>
<div class="paragraph">
<p>Requests an HTTP upload URL.
The URL contains temporary credentials (typically valid for a few minutes) and is meant for immediate use.</p>
</div>
<div class="listingblock">
<div class="title">newUploadUrl(parameters: <a href="./common/cloud-services-types/file-upload-request.html">FileUploadRequest</a>): Promise&lt;<a href="./common/cloud-services-types/file-upload-location.html">FileUploadLocation</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.newUploadUrl(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_updatemeta"><a class="anchor" href="#_updatemeta"></a>updateMeta</h6>
<div class="listingblock">
<div class="title">updateMeta(parameters: <a href="./common/cloud-services-types/file-meta-update.html">FileMetaUpdate</a>): Promise&lt;<a href="./common/cloud-services-types/listing-entry-info.html">ListingEntryInfo</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.updateMeta(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_newfile"><a class="anchor" href="#_newfile"></a>newFile</h6>
<div class="paragraph">
<p>The client application calls this verb to notify that it&#8217;s done uploading to the cloud.
Calling that verb MAY trigger additional events such as thumbnail/metadata creation.</p>
</div>
<div class="listingblock">
<div class="title">newFile(parameters: <a href="./common/cloud-services-types/file-upload-complete.html">FileUploadComplete</a>): Promise&lt;<a href="./common/cloud-services-types/listing-entry-info.html">ListingEntryInfo</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.newFile(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_mkdir"><a class="anchor" href="#_mkdir"></a>mkdir</h6>
<div class="paragraph">
<p>Creates a new folder.
May fail if the target location is not empty.</p>
</div>
<div class="listingblock">
<div class="title">mkdir(parameters: <a href="./common/cloud-services-types/folder-creation-request.html">FolderCreationRequest</a>): Promise&lt;<a href="./common/cloud-services-types/created-file.html">CreatedFile</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.zpfs_hdfs.mkdir(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_8"><a class="anchor" href="#_how_to_use_it_8"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Zpfs_hdfs, ZpfsRequest } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private zpfs_hdfs: Zpfs_hdfs <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: ZpfsRequest) {
    const response = await this.zpfs_hdfs.readToken(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Zpfs_hdfs</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_template"><a class="anchor" href="#_template"></a>Template</h5>
<div class="paragraph">
<p>User API for templates</p>
</div>
<div class="paragraph">
<p>Users use this API to evaluate pre-configured templates.</p>
</div>
<div class="sect5">
<h6 id="_evaluate"><a class="anchor" href="#_evaluate"></a>evaluate</h6>
<div class="paragraph">
<p>Evaluates the given template and returns the result as a string.
Templates are parsed the first time they are evaluated. Evaluation may fail early due to a parsing error.</p>
</div>
<div class="listingblock">
<div class="title">evaluate(parameters: <a href="./common/cloud-services-types/template-request.html">TemplateRequest</a>): Promise&lt;<a href="./common/cloud-services-types/template-result.html">TemplateResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.template.evaluate(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_9"><a class="anchor" href="#_how_to_use_it_9"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Template, TemplateRequest } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private template: Template <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: TemplateRequest) {
    const response = await this.template.evaluate(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Template</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_communication"><a class="anchor" href="#_communication"></a>Communication</h4>
<div class="sect4">
<h5 id="_messaging"><a class="anchor" href="#_messaging"></a>Messaging</h5>
<div class="paragraph">
<p>Messaging service</p>
</div>
<div class="paragraph">
<p>Simple and flexible user-to-user or user-to-group messaging service.</p>
</div>
<div class="sect5">
<h6 id="_send"><a class="anchor" href="#_send"></a>send</h6>
<div class="paragraph">
<p>Sends the given message to the specified target on the given (optional) channel.
The administratively given default channel name is used when none is provided in the message itself.</p>
</div>
<div class="listingblock">
<div class="title">send(parameters: <a href="./common/cloud-services-types/message.html">Message</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.messaging.send(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_10"><a class="anchor" href="#_how_to_use_it_10"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Messaging, Message } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private messaging: Messaging <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: Message) {
    const response = await this.messaging.send(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Messaging</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_notif"><a class="anchor" href="#_notif"></a>Notif</h5>
<div class="paragraph">
<p>Notification User API</p>
</div>
<div class="paragraph">
<p>User API for notifications.
For notifications to work properly, it is imperative that the resource name of a device remain constant over time.</p>
</div>
<div class="sect5">
<h6 id="_send_2"><a class="anchor" href="#_send_2"></a>send</h6>
<div class="paragraph">
<p>Sends a native push notification to the target.</p>
</div>
<div class="listingblock">
<div class="title">send(parameters: <a href="./common/cloud-services-types/notification-message.html">NotificationMessage</a>): Promise&lt;<a href="./common/cloud-services-types/notification-send-status.html">NotificationSendStatus</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.notif.send(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_unregister"><a class="anchor" href="#_unregister"></a>unregister</h6>
<div class="paragraph">
<p>Unregisters the device for the current user and resource.
This verb does not need any parameters.</p>
</div>
<div class="listingblock">
<div class="title">unregister(parameters: <a href="./common/cloud-services-types/.html">undefined</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.notif.unregister(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_register"><a class="anchor" href="#_register"></a>register</h6>
<div class="paragraph">
<p>Registers the device for the current user and resource.
This service maintains a mapping of <em>userkey/</em>resource to device registration IDs.
You MUST NOT re-use the same resource name from one device to another if you want to target specific devices with 'send'.
Only one registration can be active for a given <em>userKey/</em>resource pair in a notification service.
Device registration can be &lt;b&gt;neither impersonated nor called indirectly&lt;/b&gt; (from a scheduled job).</p>
</div>
<div class="listingblock">
<div class="title">register(parameters: <a href="./common/cloud-services-types/notifiable-device-registration.html">NotifiableDeviceRegistration</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.notif.register(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_11"><a class="anchor" href="#_how_to_use_it_11"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Notif, NotificationMessage } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private notif: Notif <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: NotificationMessage) {
    const response = await this.notif.send(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Notif</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sendmail"><a class="anchor" href="#_sendmail"></a>Sendmail</h5>
<div class="paragraph">
<p>Mail service user API</p>
</div>
<div class="paragraph">
<p>This service is statically configured with an outgoing SMTP server.
Users call the API here to actually send emails.</p>
</div>
<div class="sect5">
<h6 id="_send_3"><a class="anchor" href="#_send_3"></a>send</h6>
<div class="paragraph">
<p>Sends an email with the given body to the intended recipients.</p>
</div>
<div class="listingblock">
<div class="title">send(parameters: <a href="./common/cloud-services-types/email.html">Email</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.sendmail.send(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_12"><a class="anchor" href="#_how_to_use_it_12"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Sendmail, Email } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private sendmail: Sendmail <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: Email) {
    const response = await this.sendmail.send(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Sendmail</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sms_ovh"><a class="anchor" href="#_sms_ovh"></a>Sms_ovh</h5>
<div class="paragraph">
<p>SMS service</p>
</div>
<div class="paragraph">
<p>User API for SMS.</p>
</div>
<div class="sect5">
<h6 id="_send_4"><a class="anchor" href="#_send_4"></a>send</h6>
<div class="paragraph">
<p>Sends the given message to the given recipients.</p>
</div>
<div class="listingblock">
<div class="title">send(parameters: <a href="./common/cloud-services-types/sms-message.html">SmsMessage</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.sms_ovh.send(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_13"><a class="anchor" href="#_how_to_use_it_13"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Sms_ovh, SmsMessage } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private sms_ovh: Sms_ovh <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: SmsMessage) {
    const response = await this.sms_ovh.send(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Sms_ovh</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_utilities_management"><a class="anchor" href="#_utilities_management"></a>Utilities Management</h4>
<div class="sect4">
<h5 id="_cron"><a class="anchor" href="#_cron"></a>Cron</h5>
<div class="paragraph">
<p>User API for the Scheduler</p>
</div>
<div class="paragraph">
<p>User endpoints for scheduling : users can schedule, list and delete tasks.
Tasks are stored on a per-user basis: a task will run with the priviledges of the user who stored it.
Tasks are run on the server and thus can call api verbs marked as server-only.</p>
</div>
<div class="sect5">
<h6 id="_schedule"><a class="anchor" href="#_schedule"></a>schedule</h6>
<div class="paragraph">
<p>Schedules a task for later execution. Tasks are executed asynchronously with the identity of the calling user.
Tasks will be executed at a fixed moment in time in the future, or repeatedly, with minute precision.
If a task already exists with the same cronName (a cronName is unique for a given user), this new task completely replaces it.
A task can be scheduled with a cron-like syntax for repetitive or one-shot execution.
Wildcards are not allowed for minutes and hours.
When scheduling for one-shot execution, the time must be at least two minutes into the future.</p>
</div>
<div class="listingblock">
<div class="title">schedule(parameters: <a href="./common/cloud-services-types/cron-task-request.html">CronTaskRequest</a>): Promise&lt;<a href="./common/cloud-services-types/cron-task-request.html">CronTaskRequest</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.cron.schedule(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_settimeout"><a class="anchor" href="#_settimeout"></a>setTimeout</h6>
<div class="paragraph">
<p>Schedules a task for later execution. Tasks are executed asynchronously with the identity of the calling user.
Tasks will be executed with second precision in the near future (120 seconds delay max).</p>
</div>
<div class="listingblock">
<div class="title">setTimeout(parameters: <a href="./common/cloud-services-types/timer-request.html">TimerRequest</a>): Promise&lt;<a href="./common/cloud-services-types/timer-result.html">TimerResult</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.cron.setTimeout(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_unschedule"><a class="anchor" href="#_unschedule"></a>unschedule</h6>
<div class="paragraph">
<p>Removes a previously scheduled task.
Does absolutely nothing if asked to remove a non-existent task.</p>
</div>
<div class="listingblock">
<div class="title">unschedule(parameters: <a href="./common/cloud-services-types/cron-task-deletion.html">CronTaskDeletion</a>): Promise&lt;<a href="./common/cloud-services-types/cron-task-deletion.html">CronTaskDeletion</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.cron.unschedule(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_list_3"><a class="anchor" href="#_list_3"></a>list</h6>
<div class="paragraph">
<p>Returns a paginated list of the asking user&#8217;s tasks.</p>
</div>
<div class="listingblock">
<div class="title">list(parameters: <a href="./common/cloud-services-types/cron-task-list-request.html">CronTaskListRequest</a>): Promise&lt;<a href="./common/cloud-services-types/cron-planning.html">CronPlanning</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.cron.list(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_14"><a class="anchor" href="#_how_to_use_it_14"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Cron, CronTaskRequest } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private cron: Cron <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: CronTaskRequest) {
    const response = await this.cron.schedule(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Cron</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_logs"><a class="anchor" href="#_logs"></a>Logs</h5>
<div class="paragraph">
<p>Log API</p>
</div>
<div class="paragraph">
<p>User API for logging.</p>
</div>
<div class="sect5">
<h6 id="_log"><a class="anchor" href="#_log"></a>log</h6>
<div class="paragraph">
<p>Adds some server generated data and stores the entry into the sink defined by configuration.</p>
</div>
<div class="listingblock">
<div class="title">log(parameters: <a href="./common/cloud-services-types/log-request.html">LogRequest</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.logs.log(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_15"><a class="anchor" href="#_how_to_use_it_15"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Logs, LogRequest } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private logs: Logs <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: LogRequest) {
    const response = await this.logs.log(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Logs</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_trigger"><a class="anchor" href="#_trigger"></a>Trigger</h5>
<div class="paragraph">
<p>Trigger service</p>
</div>
<div class="paragraph">
<p>Register listeners and trigger events.</p>
</div>
<div class="sect5">
<h6 id="_trigger_2"><a class="anchor" href="#_trigger_2"></a>trigger</h6>
<div class="paragraph">
<p>Triggers an event.
All listeners previously registered for that event will be called, in no particular order.</p>
</div>
<div class="listingblock">
<div class="title">trigger(parameters: <a href="./common/cloud-services-types/event-trigger.html">EventTrigger</a>): Promise&lt;<a href="./common/cloud-services-types/void.html">void</a>&gt;</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
</pre></td>
  <td class="code"><pre>const response = await this.trigger.trigger(parameters);</pre></td>
</tr></table></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_how_to_use_it_16"><a class="anchor" href="#_how_to_use_it_16"></a>How to use it ?</h6>
<div class="listingblock">
<div class="title">worker/index.ts</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="typescript"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td>
  <td class="code"><pre>import { Injectable } from '@zetapush/core';
import { Trigger, EventTrigger } from '@zetapush/platform-legacy'; <i class="conum" data-value="1"></i><b>(1)</b>

@Injectable()
export default class Api {
  constructor(
    private trigger: Trigger <i class="conum" data-value="2"></i><b>(2)</b>
  ) {}
  async doStuff(parameters: EventTrigger) {
    const response = await this.trigger.trigger(parameters); <i class="conum" data-value="3"></i><b>(3)</b>
    return response;
  }
}</pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>Trigger</code> from platform</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare injected service</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Call injected service</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="cli"><a class="anchor" href="#cli"></a>Command Line Interface</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_config"><a class="anchor" href="#_config"></a>Config</h3>

</div>
<div class="sect2">
<h3 id="_run"><a class="anchor" href="#_run"></a>Run</h3>

</div>
<div class="sect2">
<h3 id="_push_2"><a class="anchor" href="#_push_2"></a>Push</h3>

</div>
<div class="sect2">
<h3 id="verbosity_level"><a class="anchor" href="#verbosity_level"></a>Change verbosity</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ZetaPush prefers convention over configuration. However, conventions can be overriden.</p>
</div>
<div class="sect2">
<h3 id="_account_configuration"><a class="anchor" href="#_account_configuration"></a>Account configuration</h3>
<div class="paragraph">
<p>To use ZetaPush Celtia, you need to have an account and an optional application.
You specify this properties in the <code>.zetarc</code> file.
Here is the list of them:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Account variables</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Name of the property</th>
<th class="tableblock halign-center valign-middle">Definition</th>
<th class="tableblock halign-center valign-middle">environment variable</th>
<th class="tableblock halign-center valign-middle">Name in the <em>.zetarc</em></th>
<th class="tableblock halign-center valign-middle">CLI parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Developer login</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">This login is the email used by the developer when logging in to the ZetaPush console. It <strong>does not concern</strong> the applications developed by the developer. It is only used to identify the developer account.</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_DEVELOPER_LOGIN</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">developerLogin</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--developer-login &lt;login&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Developer password</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Like the property <em>--developer-login</em>, this password is only used for the ZetaPush developer account. It <strong>does not concern</strong> the applications developed by the developer.</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_DEVELOPER_PASSWORD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">developerLogin</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--developer-password &lt;password&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Application name</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">A developer can develop many applications. Hence the need to identify each of them. The <em>appName</em> property is the unique name of an application on a ZetaPush developer account.</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_APP_NAME</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">appName</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--app-name &lt;name&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Environment name</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">An application created by a developer can have many environments.
The default environment is <em>prod</em> but you can create your own (<em>dev</em>, <em>preprod</em>, &#8230;&#8203;).
An environment is one stage in the development of the application.</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_ENV_NAME</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">envName</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--env-name &lt;env&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">Platform URL</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">By default, the developer uses the <em>production environment of ZetaPush</em> to develop and deploy its applications. In most cases, the developer doesn&#8217;t need to set this property. <strong>This property if useful when another (on premise, or dedicated) ZetaPush platform is to be used.</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ZP_PLATFORM_URL</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">platformUrl</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">--platform-url &lt;platform&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_code_structure_configuration"><a class="anchor" href="#_code_structure_configuration"></a>Code structure configuration</h3>
<div class="paragraph">
<p>You can configure your applications with several variables. Here is the list of them:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 2. Application variables</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Name of the property</th>
<th class="tableblock halign-center valign-middle">Definition</th>
<th class="tableblock halign-center valign-middle"><em>package.json</em></th>
<th class="tableblock halign-center valign-middle">CLI parameter</th>
<th class="tableblock halign-center valign-middle">Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>Front code</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>In an application, you need to define where you put your front end part of your application.
ZetaPush uses this property to host and expose it.</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="key"><span class="delimiter">&quot;</span><span class="content">zetapush</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">front</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./path/of/front</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>--front &lt;path&gt;</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p><code>./front/</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>Worker code</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>When you create your business logic in <em>custom cloud services</em>, ZetaPush need to know his location to deploy it.</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
</pre></td>
  <td class="code"><pre><span class="key"><span class="delimiter">&quot;</span><span class="content">zetapush</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">worker</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./path/of/worker</span><span class="delimiter">&quot;</span></span>
}</pre></td>
</tr></table></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>--worker &lt;path&gt;</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p><code>./worker/</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>Worker entry point</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p>To use your <em>custom cloud services</em> from the front part you need to export them. So the exportation of services need to be in only one file.</p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="key"><span class="delimiter">&quot;</span><span class="content">main</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">./path/of/entry</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p><em>None</em></p>
</div></div></td>
<td class="tableblock halign-center valign-middle"><div><div class="paragraph">
<p><code>./worker/index.ts</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="configuration_properties"><a class="anchor" href="#configuration_properties"></a>Configuration properties</h3>

</div>
<div class="sect2">
<h3 id="_customize_cloud_services"><a class="anchor" href="#_customize_cloud_services"></a>Customize cloud services</h3>
<div class="sect3">
<h4 id="_user_management_2"><a class="anchor" href="#_user_management_2"></a>User Management</h4>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Update this section to match new plan</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/zetapush/documentation/issues/61" class="bare">https://github.com/zetapush/documentation/issues/61</a></p>
</div>
<div class="paragraph">
<p>Unresolved directive in reference.adoc - include::/var/lib/jenkins/workspace/Github_documentation_master-IOSGDW42Y6L7PFABZDVKWIMQ7U5ZFS2WPFP2G4YQ6QQOVPTQ7Y4A/src/docs/asciidoc/common/cloud-services/user-management.adoc[leveloffset=+2]</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logs_2"><a class="anchor" href="#_logs_2"></a>Logs</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_console_log"><a class="anchor" href="#_console_log"></a>Console.log</h3>

</div>
<div class="sect2">
<h3 id="local_logger"><a class="anchor" href="#local_logger"></a>Utility methods provided by @zetapush/common</h3>

</div>
<div class="sect2">
<h3 id="log_service"><a class="anchor" href="#log_service"></a>Built-in log cloud service</h3>

</div>
<div class="sect2">
<h3 id="_logs_using_requestcontext"><a class="anchor" href="#_logs_using_requestcontext"></a>Logs using requestContext</h3>

</div>
<div class="sect2">
<h3 id="_use_another_logging_library"><a class="anchor" href="#_use_another_logging_library"></a>Use another logging library</h3>

</div>
<div class="sect2">
<h3 id="logs_in_web_console"><a class="anchor" href="#logs_in_web_console"></a>View logs in web console</h3>

</div>
<div class="sect2">
<h3 id="_persist_logs"><a class="anchor" href="#_persist_logs"></a>Persist logs</h3>

</div>
<div class="sect2">
<h3 id="_external_log_visualization"><a class="anchor" href="#_external_log_visualization"></a>External log visualization</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_tests"><a class="anchor" href="#_tests"></a>Tests</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_test_your_custom_cloud_services"><a class="anchor" href="#_test_your_custom_cloud_services"></a>Test your custom cloud services</h3>
<div class="sect3">
<h4 id="testing_utilities"><a class="anchor" href="#testing_utilities"></a>Testing utilities provided by ZetaPush</h4>

</div>
<div class="sect3">
<h4 id="_unit_testing"><a class="anchor" href="#_unit_testing"></a>Unit testing</h4>

</div>
<div class="sect3">
<h4 id="integration_testing"><a class="anchor" href="#integration_testing"></a>Integration testing</h4>
<div class="sect4">
<h5 id="tests_in_cloud"><a class="anchor" href="#tests_in_cloud"></a>Integration testing on published worker</h5>

</div>
</div>
<div class="sect3">
<h4 id="e2e_testing"><a class="anchor" href="#e2e_testing"></a>Test your application (end to end)</h4>

</div>
</div>
<div class="sect2">
<h3 id="test_in_typescript"><a class="anchor" href="#test_in_typescript"></a>Write tests in TypeScript</h3>

</div>
<div class="sect2">
<h3 id="advanced_mocks"><a class="anchor" href="#advanced_mocks"></a>Mocks</h3>

</div>
<div class="sect2">
<h3 id="test_snapshot"><a class="anchor" href="#test_snapshot"></a>Initialize test with data</h3>

</div>
<div class="sect2">
<h3 id="_logs_in_tests"><a class="anchor" href="#_logs_in_tests"></a>Logs in tests</h3>
<div class="sect3">
<h4 id="verbosity_level_in_tests"><a class="anchor" href="#verbosity_level_in_tests"></a>Verbosity level</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_run_of_your_application"><a class="anchor" href="#_advanced_run_of_your_application"></a>Advanced run of your application</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="run_worker_only"><a class="anchor" href="#run_worker_only"></a>Run cloud services only</h3>

</div>
<div class="sect2">
<h3 id="_run_front_only"><a class="anchor" href="#_run_front_only"></a>Run front only</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_deployment_of_your_application"><a class="anchor" href="#_advanced_deployment_of_your_application"></a>Advanced deployment of your application</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="partial_deployment"><a class="anchor" href="#partial_deployment"></a>Partial deployment</h3>

</div>
<div class="sect2">
<h3 id="_environment_variables"><a class="anchor" href="#_environment_variables"></a>Environment variables</h3>

</div>
<div class="sect2">
<h3 id="_custom_npm_registry"><a class="anchor" href="#_custom_npm_registry"></a>Custom npm registry</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="http_server"><a class="anchor" href="#http_server"></a>HTTP server</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="internal_http_server"><a class="anchor" href="#internal_http_server"></a>HTTP server provided by ZetaPush</h3>

</div>
<div class="sect2">
<h3 id="custom_http_server"><a class="anchor" href="#custom_http_server"></a>Custom HTTP server</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_extend_a_cloud_service"><a class="anchor" href="#_extend_a_cloud_service"></a>Extend a cloud service</h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-12-27 13:21:41 UTC
</div>
</div>
</body>
</html>