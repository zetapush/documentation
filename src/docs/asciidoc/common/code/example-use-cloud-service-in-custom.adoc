:relative-path: ../../
include::{docdir}/variables.adoc[]

In this example, we will use the `Stack` _cloud service_ provided by ZetaPush.
In our use-case, we want to put some data associated with the current timestamp and be able to list all stored data.

For this the `Stack` service provides some methods:

* `push({ _stack_: string, _data_: object });`
* `list({ _stack_: string });`

NOTE: The `Stack` service has asynchronous methods


.MyStorageService
[source,typescript,linenums]
----
import { Injectable } from '@zetapush/core';
import { Stack } from '@zetapush/platform-legacy';  // <1>

@Injectable()
export default class MyStorageService {
  private stackName = 'stack-example';

  constructor(private stack: Stack) {}              // <2> 
  
  /**
   *  Store data with associated timestamp
   */
  storeWithTimestamp(value: any) {
    return this.stack.push({                        // <3>
      stack: this.stackName,
      data: {
        value,
        timestamp: Date.now()
      }
    });
  }

  /**
   * List all stored data
   */
  getAllData() {
    return this.stack.list({                        // <4>
      stack: this.stackName
    });
  }
}
----
<1> We import the `Stack` service so that TypeScript knows it
<2> We ask ZetaPush to inject a dependency of type `Stack` (`stack` is an instance of `Stack`)
<3> Call `Stack` service to store data (method `push`)
<4> Call `Stack` service to list data (method `list`)