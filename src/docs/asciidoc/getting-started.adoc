:relative-path: ./
include::{docdir}/variables.adoc[]

// override to have a more significant application name for the quick start
:appName: hello-world

= Getting Started

== System requirements

// PREREQUISITES
include::{docdir}/common/prerequisites/prerequisites.adoc[]

== Create your first application

=== From the command line

include::{docdir}/common/cli/create-project.adoc[leveloffset=+2]


[TIP]
====
See <<developer-manual.adoc#_zetapush_account_management, ZetaPush account management>> to learn how to manage your account and your applications.
====

=== Generated project

.Result of {appName} project
image::{images-dir}/hello-world/result.png[role=center]


[NOTE]
====
The project `{appName}` generated by the CLI is available on link:https://github.com/zetapush/zetapush-examples/tree/master/hello-world/[Github].
This sample is also available using different front frameworks: 

- link:https://github.com/zetapush/zetapush-examples/tree/master/hello-world/hello-world-react[React]
- link:https://github.com/zetapush/zetapush-examples/tree/master/hello-world/hello-world-vue[Vue.js]
- link:https://github.com/zetapush/zetapush-examples/tree/master/hello-world/hello-world-angular[Angular]
====


==== What it does ?

The generated project is really simple. It is just a web page that uses some JavaScript to call a cloud function named `hello` when button is clicked.
The cloud function is a custom cloud function that simply returns a message with the current date.
The result is retrieved by the JavaScript code and displayed in the browser console (using `console.log`).

==== Structure of generated project

The files of the generated project are structured as followed:

include::{docdir}/common/code/generated-tree-init.adoc[leveloffset=+1]

include::{docdir}/common/code/table-definition-generated-files.adoc[leveloffset=+1]


== Run locally your first project

=== What is run ?

Run is used in development phase. You run your code locally on your development machine. You can then iterate on your code to provide new features quickly or even debug your code.

=== From your terminal

Go into the generated folder (`{appName}`):
[source, console, subs="attributes+"]
----
$ cd {appName}
----

Then run the following command:

include::{docdir}/common/cli/run-project.adoc[leveloffset=+2]

This command launches both a local web server on `localhost:3000` and the custom cloud services.
You can open a web browser on `localhost:3000` and open the browser console.

You can click on the button and see the result of the custom cloud service call in the browser console.

=== How it works

include::{docdir}/common/diagrams/run-locally-exchanges.adoc[leveloffset+=2]

There are 3 parts that are working together:

1. The web page that initiates a connection to the ZetaPush cloud
2. The ZetaPush cloud
3. The worker that provides the custom cloud function implementation

Firstly, the web page is loaded in the browser and a JavaScript code automatically connects the _ZetaPush client_ to the _ZetaPush cloud_.

[TIP]
====
The connection is requested with `client.connect()` in `{appName}/front/index.html`.
====

[IMPORTANT]
====
The connection between _ZetaPush client_ and the _ZetaPush cloud_ is established and is bi-directional. Any message sent by _ZetaPush client_ will go through this opened connection.
The _ZetaPush cloud_ can also send messages to the _ZetaPush client_ through this opened connection.
====

Then, when the user clicks on the button, a message is sent to the _ZetaPush cloud_ in order to execute some code. 
The _ZetaPush cloud_ routes the message to the worker to call the custom cloud function.

[TIP]
====
The button is defined in `{appName}/front/index.html`
====

[TIP]
====
The action of the button is done in `{appName}/front/index.js` and it calls `api.hello()`.
====


The custom cloud function is simply a JavaScript or TypeScript function. This function is called and it generates a result that is returned to _ZetaPush cloud_.
_ZetaPush cloud_ routes the response message to the _ZetaPush client_ to send the result.

[TIP]
====
The code of the cloud function is available in `{appName}/worker/index.ts`
====

Finally, the _ZetaPush client_ receives the result and the JavaScript code of the web page displays it in the browser console (using `console.log`).

[TIP]
====
The result is handled in `{appName}/front/index.js`.
====


[IMPORTANT]
====
Even if you run locally, the cloud functions defined by your worker are available on the Internet through _ZetaPush cloud_.
====

== Push your first project in the Cloud

=== What is push ?

Push is used to make your code "public". It will publish your web page(s) and also upload the code of your worker on _ZetaPush cloud_.
You can push when you think that your code is ready to be used by your end-users.

=== From your terminal

include::{docdir}/common/cli/push-project.adoc[leveloffset=+2]

This command uploads your code (front and worker) to the ZetaPush cloud. ZetaPush then handles the deployment
by publishing your front and your custom cloud services.

The CLI displays the URL to access the published web page.

=== How it works

include::{docdir}/common/diagrams/run-in-cloud-exchanges.adoc[leveloffset+=2]

Now, the web page (front) and the custom cloud functions (defined in a worker) are hosted directly on _ZetaPush cloud_.
The behavior remains the same as when code is executed local machine:

- There are still the same 3 parts working together (web page, _ZetaPush cloud_ and custom cloud function)
- There is still a connection established by the client from the web page
- There is still a message sent by the client to _ZetaPush cloud_ that is routed to call the custom cloud function
- There is still a message sent by the _ZetaPush cloud_ that is routed to the client with the result of the custom cloud function


== What's next

You have created a new application, executed it locally and then published it.

Now, you are ready to code your own application:

- See <<developer-manual.adoc#_develop_your_front_with_zetapush, how to use built-in ZetaPush cloud services>>
- See <<developer-manual.adoc#_account_management, how to add user management to my application>>
- See <<developer-manual.adoc#_develop_your_business_logic, how to add your custom business logic>>