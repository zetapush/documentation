<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Untitled</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../..//javascripts/menu.js"></script>
<script type="text/javascript" src="../..//javascripts/sidebar.js"></script>
<script type="text/javascript" src="../..//javascripts/steps.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/source-utils.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/highlight-lines.js"></script>
<script type="text/javascript" src="../..//javascripts/sourcecode/collapse-lines.js"></script>
<script type="text/javascript" src="../..//javascripts/tabcontainer.js"></script>
<script type="text/javascript" src="//unpkg.com/clipboard@2.0.0/dist/clipboard.min.js"></script>
<script type="text/javascript" src="../..//javascripts/clipboard.js"></script>
<script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.js"></script>
<script type="text/javascript" src="../..//javascripts/search.js"></script>
<!-- <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/united/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css"
  /> -->
<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,800" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="../..//styles/zetapush-styles.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/custom-styles.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/tabcontainer.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/steps.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/sourcecode/collapse-lines.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/sourcecode/highlight-lines.css" />
<link rel="stylesheet" type="text/css" href="../..//styles/clipboard.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3/dist/instantsearch.min.css">
<script type="text/html" id="hit-template">
  <div class="hit">
    <div class="hit-content">
      <div class="context">
        <a href="{{sourceFile.url}}">{{sourceFile.title}}</a>
        {{#parents}}
          <a href="{{url}}">{{title}}</a>
        {{/parents}}
        <a href="{{url}}">{{{_highlightResult.title.value}}}</a>
      </div>
      <pre class="hit-description">{{{_highlightResult.content.value}}}</pre>
    </div>
  </div>
</script>
<header>
  <nav>
    <div class="main-title"><span></span><i class="fa fa-caret-down"></i></div>
    <ul>
      <li><a href="/documentation"><span>ZetaPush documentation</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/getting-started.html"><span>Getting Started</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/developer-manual.html"><span>Developer manual</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/how-to.html"><span>How to guides</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/tutorials.html"><span>Tutorials</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="/documentation/reference.html"><span>Reference</span><i class="fa fa-angle-right"></i></a></li>
      <li><a href="http://docv2.zetapush.com"><span>Documentation v2</span><i class="fa fa-angle-right"></i></a></li>
    </ul>
    <div>
      <div class="contact-us">
        <a href="https://www.zetapush.com/contact" target="_blank">Contact us</a>
      </div>
      <div class="github">
        <a href="https://github.com/zetapush" target="_blank">
          <span>Join us on</span><i class="fa fa-github-alt" title="Github"></i></a>
      </div>
      <div class="search">
        <input id="search-input" placeholder="Search for products">
        <div class="search-results">
          <div id="search-hits"></div>
        </div>
      </div>
      <div class="logo">
        <a href="https://www.zetapush.com"><span class="icon"></span></a>
      </div>
    </div>
  </nav>
</header>
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>ZetaPush wants to provide you the best developer experience in order to
focus on the functional and not technical issues. We want to offer
a way to quickly secure your application. We aim to cover about 80%
of usages with our system. For example, you could write something like this in your
code:</p>
</div>
<div class="listingblock">
<div class="title">Cloud service</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>Injectable()
<span class="reserved">export</span> <span class="keyword">default</span> <span class="reserved">class</span> MyCustomCloudService {
  <span class="error">@</span>CanChangePassword
  changePassword(user) {
    <span class="comment">// code for changing a password of a user</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead of using technical annotations or calls, we want
to provide you the possibility to define your own security
annotations. It makes the code easier to read and to maintain.</p>
</div>
<div class="paragraph">
<p>Here is an example of the code a custom annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { isAdmin, isCurrentUser, SecurityException } from <span class="string"><span class="delimiter">'</span><span class="content">@zetapush/security</span><span class="delimiter">'</span></span>;

<span class="reserved">export</span> const CanChangePassword = (user) =&gt; {
  <span class="comment">// an admin can change password of anyone</span>
  <span class="keyword">if</span>(isAdmin()) {
    <span class="keyword">return</span>;
  }
  <span class="comment">// a user can change only its own password</span>
  <span class="keyword">if</span>(isCurrentUser(user)) {
    <span class="keyword">return</span>;
  }
  <span class="comment">// not allowed</span>
  <span class="keyword">throw</span> <span class="keyword">new</span> SecurityException(<span class="error">`</span>You are not allowed to change password of <span class="predefined">$</span>{user.login}<span class="error">`</span>, user);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to control who can execute actions, we want
to provide a simple way to retrieve filtered data that comes from
database. For example, an admin could view everything while
a user could only see his friends.</p>
</div>
<div class="listingblock">
<div class="title">Data object</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">@</span>CanSeeAccount()
<span class="error">@</span>Storable()
<span class="error">@</span>Searchable({<span class="key">name</span>: [<span class="string"><span class="delimiter">'</span><span class="content">firstname</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">lastname</span><span class="delimiter">'</span></span>]})
<span class="reserved">class</span> User {
  <span class="reserved">private</span> firstname: string;
  <span class="reserved">private</span> lastname: string;
  <span class="reserved">private</span> birthdate: Date;
  <span class="error">@</span>Searchable()
  <span class="reserved">private</span> email: EmailAddress;
  <span class="error">@</span>Searchable()
  <span class="error">@</span>Sensitive()
  <span class="reserved">private</span> phoneNumber: PhoneNumber;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of the code a custom annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { isAdmin, isCurrentUser, currentUser } from <span class="string"><span class="delimiter">'</span><span class="content">@zetapush/security</span><span class="delimiter">'</span></span>;

const areFriends = (userFromDatabase, otherUser) =&gt; {
  <span class="comment">// ... (your code to check if the users are friends)</span>
}

<span class="reserved">export</span> const CanSeeAccount = (userFromDatabase) =&gt; {
  <span class="comment">// an admin can see all accounts</span>
  <span class="keyword">if</span>(isAdmin()) {
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }
  <span class="comment">// a user can see its account</span>
  <span class="keyword">if</span>(isCurrentUser(userFromDatabase)) {
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }
  <span class="comment">// a user can see accounts of his friends</span>
  <span class="keyword">if</span>(areFriends(currentUser(), userFromDatabase)) {
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }
  <span class="comment">// not allowed to see</span>
  <span class="keyword">return</span> <span class="predefined-constant">false</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Moreover, you could filter fields for example to prevent some sensitive
information to be visible to other users. Here we want to make phone
number only visible for an admin and the user that owns the phone number
(look at <code>@Sensitive()</code> annotation that indicates that the data
must not be visible unless we explicitly want it):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="reserved">import</span> { isAdmin, isCurrentUser, currentUser, accessSensitiveField } from <span class="string"><span class="delimiter">'</span><span class="content">@zetapush/security</span><span class="delimiter">'</span></span>;

const areFriends = (userFromDatabase, otherUser) =&gt; {
  <span class="comment">// ... (your code to check if the users are friends)</span>
}

<span class="reserved">export</span> const CanSeeAccount = (userFromDatabase) =&gt; {
  <span class="comment">// an admin can see all accounts</span>
  <span class="keyword">if</span>(isAdmin()) {
    <span class="keyword">return</span> accessSensitiveField(<span class="string"><span class="delimiter">'</span><span class="content">phoneNumber</span><span class="delimiter">'</span></span>);
  }
  <span class="comment">// a user can see its account</span>
  <span class="keyword">if</span>(isCurrentUser(userFromDatabase)) {
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }
  <span class="comment">// a user can see accounts of his friends</span>
  <span class="keyword">if</span>(areFriends(currentUser(), userFromDatabase)) {
    <span class="keyword">return</span> <span class="predefined-constant">true</span>;
  }
  <span class="comment">// not allowed to see</span>
  <span class="keyword">return</span> <span class="predefined-constant">false</span>;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These features are under construction and the API is not
fixed for the moment</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-12-18 09:26:37 UTC
</div>
</div>
</body>
</html>